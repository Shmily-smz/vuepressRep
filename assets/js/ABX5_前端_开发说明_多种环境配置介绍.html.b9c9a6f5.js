"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[574],{92284:(s,n,a)=>{a.r(n),a.d(n,{comp:()=>e,data:()=>o});var t=a(20641);const p={},e=(0,a(66262).A)(p,[["render",function(s,n){return(0,t.uX)(),(0,t.CE)("div",null,n[0]||(n[0]=[(0,t.Fv)('<h1 id="多种执行环境配置介绍-多种执行环境配置介绍" tabindex="-1"><a class="header-anchor" href="#多种执行环境配置介绍-多种执行环境配置介绍"><span>多种执行环境配置介绍 {#多种执行环境配置介绍}</span></a></h1><h2 id="资源加载-资源加载" tabindex="-1"><a class="header-anchor" href="#资源加载-资源加载"><span>资源加载 {#资源加载}</span></a></h2><p>资源加载方式分为两种：远端加载、本地加载</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">enum</span> ResourceLoadedType <span class="token punctuation">{</span></span>\n<span class="line">    Remote <span class="token operator">=</span> <span class="token string">&#39;remote&#39;</span><span class="token punctuation">,</span> <span class="token comment">// http://</span></span>\n<span class="line">    Local <span class="token operator">=</span> <span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token comment">// file://</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="环境介绍-环境介绍" tabindex="-1"><a class="header-anchor" href="#环境介绍-环境介绍"><span>环境介绍 {#环境介绍}</span></a></h2><p>运行环境分为三种：浏览器、壳子<code>abc</code>、壳子<code>aep</code></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">enum</span> <span class="token constant">ENV</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token constant">ABC</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token constant">WEB</span> <span class="token operator">=</span> <span class="token string">&#39;web&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token constant">AEP</span> <span class="token operator">=</span> <span class="token string">&#39;aep&#39;</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>浏览器</strong> 通过浏览器加载资源，此时资源的加载方式一般是将本地资源静态托管，一般采用通过<code>mock</code>命令</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">cd mock</span>\n<span class="line">node index<span class="token punctuation">.</span>js</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>使用方式：打开chrome浏览器，访问网址<a>http://localhost:9050/node_modules/@agree/ab-micro-main/index.html</a>即可打开，开启测试之旅</p><ul><li><strong>abc</strong> 通过壳子加载资源，此时的资源加载方式分为三种：</li></ul><p>1.壳子作为运行环境，资源的加载方式为静态托管<code>mock</code></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">cn<span class="token punctuation">.</span>com<span class="token punctuation">.</span>agree<span class="token punctuation">.</span>ab<span class="token punctuation">.</span>a5<span class="token punctuation">.</span>client<span class="token punctuation">.</span>gui<span class="token punctuation">.</span>aui<span class="token operator">/</span>defaultTradePath <span class="token operator">=</span> </span>\n<span class="line"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:9050/ABX/node_modules/@agree/ab-micro-main/index.html</span><span class="token template-punctuation string">`</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.壳子作为运行环境，远端加载资源</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">cn<span class="token punctuation">.</span>com<span class="token punctuation">.</span>agree<span class="token punctuation">.</span>ab<span class="token punctuation">.</span>a5<span class="token punctuation">.</span>client<span class="token punctuation">.</span>gui<span class="token punctuation">.</span>aui<span class="token operator">/</span>defaultTradePath <span class="token operator">=</span> </span>\n<span class="line"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://192.168.70.10/abxmlh/abx5-aarm/aarm/ABX/node_modules/@agree/ab-micro-main/index.html</span><span class="token template-punctuation string">`</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>3.壳子作为运行环境，本地加载资源：即将服务端资源通过壳子的热更新能力下载到本地，然后采用<code>file://</code>加载资源</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">cn<span class="token punctuation">.</span>com<span class="token punctuation">.</span>agree<span class="token punctuation">.</span>ab<span class="token punctuation">.</span>a5<span class="token punctuation">.</span>client<span class="token punctuation">.</span>gui<span class="token punctuation">.</span>aui<span class="token operator">/</span>defaultTradePath <span class="token operator">=</span> </span>\n<span class="line"><span class="token operator">/</span><span class="token constant">ABX</span><span class="token operator">/</span>node_modules<span class="token operator">/</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">agree</span></span><span class="token operator">/</span>ab<span class="token operator">-</span>micro<span class="token operator">-</span>main<span class="token operator">/</span>index<span class="token punctuation">.</span>html</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>aep</strong></li></ul><h2 id="编译命令-编译命令" tabindex="-1"><a class="header-anchor" href="#编译命令-编译命令"><span>编译命令 {#编译命令}</span></a></h2><p>编译分为两种模式：<code>dev</code>,<code>build</code></p><p>区别：a.配置不同 b.压缩混淆方式不同</p><ul><li><strong>dev</strong></li></ul><p>如果希望在浏览器环境运行，请使用如下命令：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">yarn dev <span class="token comment">// npm run dev</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>build</strong></li></ul><p>如果希望在壳子环境运行，请使用如下命令：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">yarn build <span class="token comment">// npm run build</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="config-json-config-json" tabindex="-1"><a class="header-anchor" href="#config-json-config-json"><span>config.json {#config.json}</span></a></h2><p>工作空间<code>workspace</code>的根目录有个<code>config.json</code>文件，此文件一般在开发环境下用于配置编译相关</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token punctuation">{</span></span>\n<span class="line">    <span class="token string-property property">&quot;devConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 运行环境</span></span>\n<span class="line">        <span class="token string-property property">&quot;serviceEndPoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:9050/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 服务端配置文件，此处配置为本地，所以需要mock接口:/getFrontEndConfig</span></span>\n<span class="line">        <span class="token string-property property">&quot;resourcePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:9050/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 加载的资源地址</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mock-mock" tabindex="-1"><a class="header-anchor" href="#mock-mock"><span>mock {#mock}</span></a></h2><p>此文件可用于开发时的资源静态托管：<code>workspace/mock/index.js</code></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">9050</span></span>\n<span class="line"></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;../dist/ABX&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;./Main/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;server is start,port is&#39;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/getFrontEndConfig&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">        data<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token string-property property">&quot;resourceServiceEndPoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://192.168.70.10/abxmlh/demo-aarm/aarm&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;terminalType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;consolelog&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;localization&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;messageUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ws://192.168.70.10/abxmlh/demo-message/message/websocket&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;commitUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://192.168.70.10/abxmlh/demo-&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;manifestPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;abx/dependencies.manifest.json&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;publicPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ABX&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;resolve&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">                <span class="token string-property property">&quot;extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;adt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gif&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">                <span class="token string-property property">&quot;existDepModuleExtensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;js&quot;</span><span class="token punctuation">]</span></span>\n<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">            <span class="token string-property property">&quot;suffixCollectionWithFileContent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;adt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gif&quot;</span><span class="token punctuation">]</span></span>\n<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">        code<span class="token operator">:</span> <span class="token string">&quot;200&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 成功</span></span>\n<span class="line">        msg<span class="token operator">:</span> <span class="token string">&quot;success&quot;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',33)]))}]]),o=JSON.parse('{"path":"/ABX5/%E5%89%8D%E7%AB%AF/%E5%BC%80%E5%8F%91%E8%AF%B4%E6%98%8E/%E5%A4%9A%E7%A7%8D%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D.html","title":"多种执行环境配置介绍 {#多种执行环境配置介绍}","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"资源加载 {#资源加载}","slug":"资源加载-资源加载","link":"#资源加载-资源加载","children":[]},{"level":2,"title":"环境介绍 {#环境介绍}","slug":"环境介绍-环境介绍","link":"#环境介绍-环境介绍","children":[]},{"level":2,"title":"编译命令 {#编译命令}","slug":"编译命令-编译命令","link":"#编译命令-编译命令","children":[]},{"level":2,"title":"config.json {#config.json}","slug":"config-json-config-json","link":"#config-json-config-json","children":[]},{"level":2,"title":"mock {#mock}","slug":"mock-mock","link":"#mock-mock","children":[]}],"git":{"updatedTime":1727145923000,"contributors":[{"name":"wangaoqi","email":"wangaoqi@agree.com.cn","commits":1}]},"filePathRelative":"ABX5/前端/开发说明/多种环境配置介绍.md"}')}}]);