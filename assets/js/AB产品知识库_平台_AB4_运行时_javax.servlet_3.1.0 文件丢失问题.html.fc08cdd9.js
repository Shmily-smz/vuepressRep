"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[3429],{49733:(a,e,i)=>{i.r(e),i.d(e,{comp:()=>p,data:()=>r});var t=i(20641);const s={},p=(0,i(66262).A)(s,[["render",function(a,e){return(0,t.uX)(),(0,t.CE)("div",null,e[0]||(e[0]=[(0,t.Fv)('<h4 id="问题背景" tabindex="-1"><a class="header-anchor" href="#问题背景"><span>问题背景</span></a></h4><p>eclipse 运行一段时间后，经常出现 javax.servlet_3.1.0 插件找不到问题，现象为 plugin 配置页面出现了 out of sync 的提示</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090447.png" alt="Image"></p><p>查看 eclipse 本地文件，发现 3.1 的文件丢失</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090507.png" alt="Image"></p><p>但此文件在新下载的 eclipse 中是存在的</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090518.png" alt="Image"></p><h4 id="问题分析" tabindex="-1"><a class="header-anchor" href="#问题分析"><span>问题分析</span></a></h4><p>之前一直怀疑是 eclipse 在后台自动更新时，导致了该问题，遂把更新关掉，但后续该问题依旧存在</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090541.png" alt="Image"></p><p>联想到 abc 在关闭时，会清理本地插件，猜测是否会清理时删除的，便在清理时增记录，日志显示，确实为 abc 关闭时清理导致</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090552.png" alt="Image"></p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090557.png" alt="Image"></p><p>发现清理时，使用的路径，使用 Platform.<em>getInstallLocation</em>() 方式获取，这种方式由于在 eclipse 中运行时，未进行配置，指向的为 eclipse 根目录，导致后续问题</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090607.png" alt="Image"></p><h4 id="问题解决" tabindex="-1"><a class="header-anchor" href="#问题解决"><span>问题解决</span></a></h4><p>把代码修改为通过工作路径获取方式，问题解决 siteDir = new File(Platform.getInstanceLocation().getURL().getFile()).getParentFile(); abcRootDir = new File(Platform.getInstanceLocation().getURL().getFile()).getParentFile();</p><h4 id="问题扩展" tabindex="-1"><a class="header-anchor" href="#问题扩展"><span>问题扩展</span></a></h4><p>以下为在 eclipse 中源码运行时，获取路径的两种关系</p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090627.png" alt="Image"></p><p><img src="https://jihulab.com/413343176/image/raw/master/lisijia/20210615090630.png" alt="Image"></p>',21)]))}]]),r=JSON.parse('{"path":"/AB%E4%BA%A7%E5%93%81%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%B9%B3%E5%8F%B0/AB4/%E8%BF%90%E8%A1%8C%E6%97%B6/javax.servlet_3.1.0%20%E6%96%87%E4%BB%B6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98.html","title":"","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1727145923000,"contributors":[{"name":"wangaoqi","email":"wangaoqi@agree.com.cn","commits":1}]},"filePathRelative":"AB产品知识库/平台/AB4/运行时/javax.servlet_3.1.0 文件丢失问题.md"}')}}]);