"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[3841],{94080:(s,e,a)=>{a.r(e),a.d(e,{comp:()=>v,data:()=>u});var n=a(20641);const i=a.p+"assets/img/Accas_deploy_app1.e6dbfa97.png",l=a.p+"assets/img/Accas_deploy_app2.997a907e.png",p=a.p+"assets/img/Accas_deploy_app3.f8f4eda8.png",t=a.p+"assets/img/Accas_deploy_app4.096fc585.png",r=a.p+"assets/img/Accas_deploy_app5.f42038a7.png",d=a.p+"assets/img/Accas_deploy_app6.467bc44b.png",c=a.p+"assets/img/镜像构建.7cca1e3c.png",o=a.p+"assets/img/镜像升级.6761d703.png",m={},v=(0,a(66262).A)(m,[["render",function(s,e){return(0,n.uX)(),(0,n.CE)("div",null,e[0]||(e[0]=[(0,n.Fv)('<h1 id="镜像构建介绍-镜像构建介绍" tabindex="-1"><a class="header-anchor" href="#镜像构建介绍-镜像构建介绍"><span>镜像构建介绍 {#镜像构建介绍}</span></a></h1><h2 id="镜像包目录简介-镜像包目录简介" tabindex="-1"><a class="header-anchor" href="#镜像包目录简介-镜像包目录简介"><span>镜像包目录简介 {#镜像包目录简介}</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">aarm</span>\n<span class="line">├─ clientWorkspace             </span>\n<span class="line">│  └─ default</span>\n<span class="line">│     ├─ preferenceServer</span>\n<span class="line">│     │  └─ preference.properties  # abc配置文件</span>\n<span class="line">│     ├─ update</span>\n<span class="line">│     │  └─ plugins                # abc插件</span>\n<span class="line">│     └─ workspace                 # 前端资源编译后的输出路径    </span>\n<span class="line">├─ compile-script                  # 前端资源</span>\n<span class="line">├─ config                          # 服务端资源</span>\n<span class="line">├─ https                           # 服务端资源</span>\n<span class="line">├─ log                             # 服务端资源</span>\n<span class="line">├─ version.txt                     # 服务端资源</span>\n<span class="line">├─ startup.bat                     # 服务端资源</span>\n<span class="line">├─ startup.sh                      # 服务端资源</span>\n<span class="line">├─ shutdown.sh                     # 服务端资源</span>\n<span class="line">├─ refreshserver.sh                # 服务端资源</span>\n<span class="line">├─ acaas-startup.sh                # 服务端资源</span>\n<span class="line">└─ aarm-5.0.0.jar                  # 服务端资源</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="镜像包构建版本-镜像包构建版本" tabindex="-1"><a class="header-anchor" href="#镜像包构建版本-镜像包构建版本"><span>镜像包构建版本 {#镜像包构建版本}</span></a></h2><p>镜像包分为两个部分：服务端资源，前端资源</p><ul><li><strong>服务端资源</strong></li></ul><p>服务端资源包含服务端需要的资源，具体介绍请查看<a href="./%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D">服务端资源目录介绍</a></p><ul><li><strong>前端资源</strong></li></ul><p>1.前端资源包含脚本，依赖库以及配置文件等，具体介绍请查看<a href="./%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D">前端资源目录介绍</a></p><p>2.服务端资源需要服务端提供</p><p>前端资源需要前端提供，并放置到<code>compile-script</code>目录，并且更新目录下的版本信息</p><p>3.使用压缩工具或者执行压缩命令，生成<code>aarm.tar.gz</code></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">tar -jcvf aarm.tar.gz ./aarm</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="镜像构建-镜像构建" tabindex="-1"><a class="header-anchor" href="#镜像构建-镜像构建"><span>镜像构建 {#镜像构建}</span></a></h2><ul><li><strong>管理端</strong></li></ul><p>镜像构建方式需要在<code>管理端</code>进行</p><p>1.管理端地址</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">http://192.168.70.10:21980/dist/#/</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2.账号需要由相关人员提供</p><ul><li><strong>构建步骤</strong></li></ul><h5 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h5><p>适用于未部署过的镜像，如果已经部署过应用，可以忽略此步骤</p><ol><li><strong>选择部署 -&gt; 部署应用</strong>: <img src="'+i+'" alt="部署应用" title="部署应用"></li><li><strong>镜像选择</strong>: <img src="'+l+'" alt="镜像选择" title="镜像选择"></li><li><strong>填入应用信息</strong>: <img src="'+p+'" alt="填入应用信息" title="填入应用信息"></li><li><strong>修改基础配置</strong>: <img src="'+t+'" alt="修改基础配置" title="修改基础配置"></li><li><strong>修改高级配置</strong>: <img src="'+r+'" alt="修改高级配置" title="修改高级配置"></li><li><strong>确认应用信息</strong>: <img src="'+d+'" alt="确认应用信息" title="确认应用信息"></li></ol><h5 id="镜像构建" tabindex="-1"><a class="header-anchor" href="#镜像构建"><span>镜像构建</span></a></h5><p>1.上传镜像源文件：将刚刚压缩好的<code>aarm.tar.gz</code>上传</p><p>2.模板选择：模板主要是提供在镜像构建过程中的脚本，也可以自定义</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">FROM 192.168.70.11:9980/abxadmin/jdk-node:latest</span>\n<span class="line">ENV LANG zh_CN.UTF-8</span>\n<span class="line">ADD aarm.tar.gz /</span>\n<span class="line">ENV TZ Asia/Shanghai</span>\n<span class="line">WORKDIR /aarm/</span>\n<span class="line">RUN yarn --cwd /aarm/compile-script/ build --outDir /aarm/clientWorkspace/default/workspace --log res &gt; /dev/null 2&gt;&amp;1</span>\n<span class="line">EXPOSE 8000</span>\n<span class="line">CMD sh startup.sh</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.自定义镜像信息</p><p>镜像名称（必填）:<code>aarm</code></p><p>版本（必填）：<code>20230621-1</code></p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>镜像名仅支持小写字母、数字及中，下划线，最少输入3个字符，必须以字母为开头，不能以中划线为结尾</p><p>版本仅支持小写字母，数字,中划线,下划线和小数点，且不能以特殊字符开头和结尾,例：&quot;v1.3.0-beta.1&quot;</p></div><p>4.点击<code>确认构建镜像</code></p><p><img src="'+c+'" alt="vitepress init screenshot" style="border-radius:8px;"></p><p>5.确认镜像构建完成后，需要升级镜像</p><p>在<code>应用-服务</code>列表中查找到服务名称，点击<code>多选框</code>选择，在本行后面有个<code>升级</code>图标，点击<code>更新应用</code></p><p><img src="'+o+'" alt="vitepress init screenshot" style="border-radius:8px;"></p><p>6.镜像升级结束后，需重新部署交易</p>',37)]))}]]),u=JSON.parse('{"path":"/ABX5/%E5%89%8D%E7%AB%AF/%E5%BC%80%E5%8F%91%E8%AF%B4%E6%98%8E/%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA.html","title":"镜像构建介绍 {#镜像构建介绍}","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"镜像包目录简介 {#镜像包目录简介}","slug":"镜像包目录简介-镜像包目录简介","link":"#镜像包目录简介-镜像包目录简介","children":[]},{"level":2,"title":"镜像包构建版本 {#镜像包构建版本}","slug":"镜像包构建版本-镜像包构建版本","link":"#镜像包构建版本-镜像包构建版本","children":[]},{"level":2,"title":"镜像构建 {#镜像构建}","slug":"镜像构建-镜像构建","link":"#镜像构建-镜像构建","children":[]}],"git":{"updatedTime":1727145923000,"contributors":[{"name":"wangaoqi","email":"wangaoqi@agree.com.cn","commits":1}]},"filePathRelative":"ABX5/前端/开发说明/镜像构建.md"}')}}]);