"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[4405],{21759:(s,n,a)=>{a.r(n),a.d(n,{comp:()=>p,data:()=>l});var e=a(20641);const t={},p=(0,a(66262).A)(t,[["render",function(s,n){const a=(0,e.g2)("font");return(0,e.uX)(),(0,e.CE)("div",null,[n[1]||(n[1]=(0,e.Lk)("h1",{id:"ab-plugin-lockview-手势图案解锁组件",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#ab-plugin-lockview-手势图案解锁组件"},[(0,e.Lk)("span",null,"ab-plugin-lockview 手势图案解锁组件")])],-1)),(0,e.Lk)("blockquote",null,[(0,e.bF)(a,{color:"green",style:{"font-weight":"bold"}},{default:(0,e.k6)((()=>n[0]||(n[0]=[(0,e.eW)("支持移动渠道")]))),_:1})]),n[2]||(n[2]=(0,e.Fv)('<p>九宫格手势图案解锁组件，该组件属于定制组件，样式需要在原生层修改。</p><h2 id="_1-引入" tabindex="-1"><a class="header-anchor" href="#_1-引入"><span>1. 引入</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> LockView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-plugin-lockview&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>集成aar</p><p><a href="http://192.168.180.26:50151/agreesdk/android/lockview/" target="_blank" rel="noopener noreferrer">api-gesture-lock-view-1.0.0-1.aar</a><a href="http://192.168.180.26:50151/agreesdk/android/lockview/" target="_blank" rel="noopener noreferrer">lib-gesture-lock-view-1.0.0-1.aar</a></p><p>添加插件配置</p><p>config.xml中添加配置：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feature</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LockView<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android-package<span class="token punctuation">&quot;</span></span></span>\n<span class="line">        <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.com.agree.abc.sdk.api.lockview.LockViewFeatureImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feature</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-使用" tabindex="-1"><a class="header-anchor" href="#_2-使用"><span>2. 使用</span></a></h2><h3 id="_2-1-show-显示手势图案弹框" tabindex="-1"><a class="header-anchor" href="#_2-1-show-显示手势图案弹框"><span>2.1 show -- 显示手势图案弹框</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line">LockView<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>params入参</strong></p><table><thead><tr><th>参数</th><th>类型</th><th>必填参数</th><th>说明</th></tr></thead><tbody><tr><td>status</td><td>number</td><td>√</td><td>0表示还未设置，3表示需要验证</td></tr></tbody></table><h3 id="_2-2-dismiss-关闭手势图案弹框" tabindex="-1"><a class="header-anchor" href="#_2-2-dismiss-关闭手势图案弹框"><span>2.2 dismiss -- 关闭手势图案弹框</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">LockView<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-3-setmessage-设置提示信息" tabindex="-1"><a class="header-anchor" href="#_2-3-setmessage-设置提示信息"><span>2.3 setMessage -- 设置提示信息</span></a></h3><p>当绘制手势密码错误时，会提示该信息。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">LockView<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;手势密码错误，请重试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-4-监听手势" tabindex="-1"><a class="header-anchor" href="#_2-4-监听手势"><span>2.4 监听手势</span></a></h3><p>需要在mounted生命周期函数里添加代码：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;onLockView&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">let</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>\n<span class="line">      data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">      <span class="token keyword">let</span> type <span class="token operator">=</span> data<span class="token punctuation">.</span>type<span class="token punctuation">;</span></span>\n<span class="line">      <span class="token keyword">let</span> password <span class="token operator">=</span> data<span class="token punctuation">.</span>password<span class="token punctuation">;</span></span>\n<span class="line">      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">case</span> <span class="token string">&quot;onEdit&quot;</span><span class="token operator">:</span> <span class="token comment">// 点击修改手势密码按钮，会弹出一个H5的输入框，输入柜员密码</span></span>\n<span class="line">          LockView<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;修改手势密码，验证服务端密码&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">          <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>\n<span class="line">          <span class="token punctuation">}</span></span>\n<span class="line">          LockView<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token keyword">case</span> <span class="token string">&quot;onConfirm&quot;</span><span class="token operator">:</span> <span class="token comment">// 表示新设置或者修改后点击确认按钮，前端会获取该密码上传到服务端存储</span></span>\n<span class="line">          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;确认修改手势密码&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token keyword">case</span> <span class="token string">&quot;onCheck&quot;</span><span class="token operator">:</span> <span class="token comment">// 表示校验密码，如果绘制的密码跟服务器密码一致，则关闭手势密码弹框</span></span>\n<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>password <span class="token operator">===</span> <span class="token string">&quot;0125&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token keyword">await</span> LockView<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token keyword">await</span> LockView<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;手势密码错误，请重试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">          <span class="token punctuation">}</span></span>\n<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>\n<span class="line">      <span class="token punctuation">}</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>onEdit</li></ul><p>该监听表示点击了修改手势密码按钮。 前端业务层会弹出一个H5的输入框，输入柜员密码，密码校验通过后，再显示手势图案解锁弹框。</p><ul><li>onConfirm</li></ul><p>表示新设置或者修改后点击确认按钮，前端会获取该密码上传到服务端存储</p><ul><li>onCheck</li></ul><p>表示校验密码，如果绘制的密码跟服务器密码一致，则关闭手势密码弹框</p><hr>',28))])}]]),l=JSON.parse('{"path":"/ABX5/%E5%89%8D%E7%AB%AF/sdk/ab-plugin-lockview.html","title":"ab-plugin-lockview 手势图案解锁组件","lang":"en-US","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"1. 引入","slug":"_1-引入","link":"#_1-引入","children":[]},{"level":2,"title":"2. 使用","slug":"_2-使用","link":"#_2-使用","children":[{"level":3,"title":"2.1 show -- 显示手势图案弹框","slug":"_2-1-show-显示手势图案弹框","link":"#_2-1-show-显示手势图案弹框","children":[]},{"level":3,"title":"2.2 dismiss -- 关闭手势图案弹框","slug":"_2-2-dismiss-关闭手势图案弹框","link":"#_2-2-dismiss-关闭手势图案弹框","children":[]},{"level":3,"title":"2.3 setMessage -- 设置提示信息","slug":"_2-3-setmessage-设置提示信息","link":"#_2-3-setmessage-设置提示信息","children":[]},{"level":3,"title":"2.4 监听手势","slug":"_2-4-监听手势","link":"#_2-4-监听手势","children":[]}]}],"git":{"updatedTime":1727145923000,"contributors":[{"name":"wangaoqi","email":"wangaoqi@agree.com.cn","commits":1}]},"filePathRelative":"ABX5/前端/sdk/ab-plugin-lockview.md"}')}}]);