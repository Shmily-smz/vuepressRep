"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[5375],{27962:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>f,data:()=>E});var e=a(20641);const t=a.p+"assets/img/默认加载页.57b1cd15.jpg",p=a.p+"assets/img/平台默认遮照效果图.85435276.jpg",l=a.p+"assets/img/执行阶段.c8188e50.jpg",i={class:"hint-container tip"},o={class:"hint-container tip"},c={class:"hint-container tip"},u={class:"hint-container tip"},d={class:"hint-container tip"},r={class:"hint-container warning"},k={class:"hint-container tip"},v={class:"hint-container warning"},g={class:"hint-container tip"},m={class:"hint-container warning"},h={class:"hint-container tip"},b={class:"hint-container warning"},y={},f=(0,a(66262).A)(y,[["render",function(n,s){const a=(0,e.g2)("RouteLink");return(0,e.uX)(),(0,e.CE)("div",null,[s[94]||(s[94]=(0,e.Fv)('<h1 id="生命周期-生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期-生命周期"><span>生命周期 {#生命周期}</span></a></h1><p>一套符合全面、简洁、便于理解原则的生命周期定义规范</p><h2 id="规范原则-规范原则" tabindex="-1"><a class="header-anchor" href="#规范原则-规范原则"><span>规范原则 {#规范原则}</span></a></h2><blockquote><p>全面、简洁、便于理解、层次分明</p></blockquote><h2 id="规范定义范围-规范定义范围" tabindex="-1"><a class="header-anchor" href="#规范定义范围-规范定义范围"><span>规范定义范围 {#规范定义范围}</span></a></h2><blockquote><p>规范定义范围划分：画面级、交易级、全局级</p></blockquote><blockquote><p>规范作用于：画面、面板、交易</p></blockquote><table><thead><tr><th style="text-align:center;">范围\\ 概念</th><th style="text-align:center;">page</th><th style="text-align:center;">panel</th><th style="text-align:center;">trade</th></tr></thead><tbody><tr><td style="text-align:center;">画面级</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">交易级</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">全局级</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr></tbody></table><h2 id="使用-使用" tabindex="-1"><a class="header-anchor" href="#使用-使用"><span>使用 {#使用}</span></a></h2><ul><li><strong>示例</strong></li></ul><blockquote><p><code>BPMN</code>示例交易</p></blockquote><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;在组件被挂载之前调用 - 画面级&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line highlighted">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>abx-page</span> <span class="token attr-name">:getBeforeMountArgs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getBeforeMountArgs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>abx-page</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line highlighted"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的模版：基础布局</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;基础布局 - 在组件被挂载之前调用 - 画面级&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',13)),(0,e.Lk)("div",i,[s[2]||(s[2]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("p",null,[s[1]||(s[1]=(0,e.eW)("交易模版的使用参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E6%A8%A1%E7%89%88.html"},{default:(0,e.k6)((()=>s[0]||(s[0]=[(0,e.eW)("模版")]))),_:1})])]),s[95]||(s[95]=(0,e.Fv)('<h2 id="画面-画面" tabindex="-1"><a class="header-anchor" href="#画面-画面"><span>画面 {#画面}</span></a></h2><blockquote><p>画面（frame、page）</p></blockquote><blockquote><p>组成面板或者交易的<code>.vue</code>均可被理解为<code>画面</code>，</p></blockquote><table><thead><tr><th style="text-align:center;">number</th><th style="text-align:left;">hookName</th><th style="text-align:left;">description</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:left;">_onBeforeMount</td><td style="text-align:left;">在组件被挂载之前调用，异步</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:left;">_onMounted</td><td style="text-align:left;">组件挂载完成后执行，异步</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:left;">_onBeforeUnmount</td><td style="text-align:left;">在组件实例被卸载之前调用，异步</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:left;">_onUnmounted</td><td style="text-align:left;">组件实例被卸载之后调用，异步</td></tr><tr><td style="text-align:center;">5</td><td style="text-align:left;">_onMessage</td><td style="text-align:left;">消息接收函数</td></tr><tr><td style="text-align:center;">6</td><td style="text-align:left;">_onBeforeUnmountTrade</td><td style="text-align:left;">销毁交易前调用，可以取消销毁动作；统一交易结束与交易中止，均为交易销毁</td></tr><tr><td style="text-align:center;">7</td><td style="text-align:left;">_onUnmountedTrade</td><td style="text-align:left;">销毁交易后调用</td></tr><tr><td style="text-align:center;">8</td><td style="text-align:left;">_onActived</td><td style="text-align:left;">组件被激活，挂载（auf 特有，keep-alive）</td></tr><tr><td style="text-align:center;">9</td><td style="text-align:left;">_onDeactived</td><td style="text-align:left;">组件被卸载，进入缓存，DOM 被移除（auf 特有，keep-alive）</td></tr><tr><td style="text-align:center;">10</td><td style="text-align:left;">_onErrorCaptured</td><td style="text-align:left;">错误处理函数</td></tr><tr><td style="text-align:center;">11</td><td style="text-align:left;">_onBeforeUnmountPanel</td><td style="text-align:left;">销毁面板前调用,可以取消销毁动作</td></tr><tr><td style="text-align:center;">12</td><td style="text-align:left;">_onUnmountedPanel</td><td style="text-align:left;">销毁面板后调用</td></tr><tr><td style="text-align:center;">13</td><td style="text-align:left;">_onShow</td><td style="text-align:left;">交易是否显示</td></tr><tr><td style="text-align:center;">14</td><td style="text-align:left;">_onHide</td><td style="text-align:left;">交易是否隐藏</td></tr></tbody></table><div class="hint-container warning"><p class="hint-container-title">Warning</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上四种钩子函数在任意的<code>.vue</code>文件中都可使用</p><p>原理：全局混入</p></div><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>如恰好当前<code>.vue</code>属于交易或者面板的画面，那么函数会有参数传入</p></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span>\n<span class="line"></span>\n<span class="line">export default {</span>\n<span class="line">  methods: {</span>\n<span class="line">    _onBeforeMount(e) {</span>\n<span class="line">      console.log(&#39;在组件被挂载之前调用 - 画面级&#39;, e)</span>\n<span class="line">    },</span>\n<span class="line">    _onMounted() {</span>\n<span class="line">      console.log(&#39;在组件被挂载之后调用 - 画面级&#39;)</span>\n<span class="line">    },</span>\n<span class="line">    _onBeforeUnmount() {</span>\n<span class="line">      console.log(&#39;在组件实例被卸载之前调用 - 画面级&#39;)</span>\n<span class="line">    },</span>\n<span class="line">    _onUnmounted() {</span>\n<span class="line">      console.log(&#39;在组件实例被卸载之后调用 - 画面级&#39;)</span>\n<span class="line">    }</span>\n<span class="line">  }</span>\n<span class="line">}</span>\n<span class="line">&lt;/&gt;</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',8)),(0,e.Lk)("div",o,[s[6]||(s[6]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("p",null,[s[4]||(s[4]=(0,e.Lk)("code",null,"ILifecycleArgs",-1)),s[5]||(s[5]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E5%85%A5%E5%8F%82"},{default:(0,e.k6)((()=>s[3]||(s[3]=[(0,e.eW)("钩子函数入参")]))),_:1})])]),s[96]||(s[96]=(0,e.Fv)('<h3 id="onbeforemount" tabindex="-1"><a class="header-anchor" href="#onbeforemount"><span>_onBeforeMount</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件被挂载之前调用 - 画面级&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul>',6)),(0,e.Lk)("div",c,[s[12]||(s[12]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("ol",null,[s[9]||(s[9]=(0,e.Lk)("li",null,"单画面交易：e.detail = {}",-1)),(0,e.Lk)("li",null,[s[8]||(s[8]=(0,e.eW)("BPMN 交易：e.detail = 服务端下发的页面消息，参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8B%E5%8F%91%E7%9A%84%E4%BA%A4%E6%98%93%E6%B6%88%E6%81%AF%E7%BB%93%E6%9E%84"},{default:(0,e.k6)((()=>s[7]||(s[7]=[(0,e.eW)("服务端下发的交易消息结构")]))),_:1})]),s[10]||(s[10]=(0,e.Lk)("li",null,"AUF 交易：e.detail = {}",-1)),s[11]||(s[11]=(0,e.Lk)("li",null,"面板：e.detail = {}",-1))])]),s[97]||(s[97]=(0,e.Fv)('<h3 id="onmounted" tabindex="-1"><a class="header-anchor" href="#onmounted"><span>_onMounted</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onMounted</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件被挂载之后调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>单画面交易：e.detail = {}</li><li>BPMN 交易：e.detail = {}</li><li>AUF 交易：e.detail = {}</li><li>面板：e.detail = {}</li></ol></div><h3 id="onbeforeunmount" tabindex="-1"><a class="header-anchor" href="#onbeforeunmount"><span>_onBeforeUnmount</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeUnmount</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件实例被卸载之前调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>单画面交易：e.detail = {}</li><li>BPMN 交易：e.detail = {}</li><li>AUF 交易：e.detail = {}</li><li>面板：e.detail = {}</li></ol></div><h3 id="onunmounted" tabindex="-1"><a class="header-anchor" href="#onunmounted"><span>_onUnmounted</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onUnmounted</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件实例被卸载之后调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>单画面交易：e.detail = {}</li><li>BPMN 交易：e.detail = {}</li><li>AUF 交易：e.detail = {}</li><li>面板：e.detail = {}</li></ol></div><h3 id="onmessage-消息处理钩子函数" tabindex="-1"><a class="header-anchor" href="#onmessage-消息处理钩子函数"><span>_onMessage {#消息处理钩子函数}</span></a></h3>',22)),(0,e.Lk)("p",null,[s[14]||(s[14]=(0,e.eW)("消息钩子函数，参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92.html#%E6%8E%A5%E6%94%B6%E6%B6%88%E6%81%AF"},{default:(0,e.k6)((()=>s[13]||(s[13]=[(0,e.eW)("接收消息")]))),_:1})]),s[98]||(s[98]=(0,e.Fv)('<blockquote><p>仅支持在<code>.vue</code>内使用</p></blockquote><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">EventName</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">type</span> <span class="token class-name">MessageOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">   <span class="token function-variable function">registerEvent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>EventName<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span></span>\n<span class="line">   detail<span class="token operator">:</span> MessageArgs</span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">function</span> <span class="token function">_onMessage</span><span class="token punctuation">(</span>e<span class="token operator">:</span>MessageOptions<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',3)),(0,e.Lk)("div",u,[s[18]||(s[18]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("p",null,[s[16]||(s[16]=(0,e.Lk)("code",null,"e.detail",-1)),s[17]||(s[17]=(0,e.eW)("的类型即传递消息时传入的参数")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92.html#dispatchMessage"},{default:(0,e.k6)((()=>s[15]||(s[15]=[(0,e.eW)("MessageArgs")]))),_:1})])]),s[99]||(s[99]=(0,e.Fv)('<ul><li><strong>示例</strong></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;getContext&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;_parcelProps&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">_onMessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        e<span class="token punctuation">.</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [!code  warning]</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>详细信息</strong><ol><li><code>registerEvent</code>：需要监听的事件列表</li></ol></li></ul><div class="hint-container caution"><p class="hint-container-title">Caution</p><p><code>registerEvent</code>: 必须被调用，如果没有监听的事件，请注册为<code>[]</code></p></div><h3 id="onbeforeunmounttrade-onbeforeunmounttrade" tabindex="-1"><a class="header-anchor" href="#onbeforeunmounttrade-onbeforeunmounttrade"><span>_onBeforeUnmountTrade {#onBeforeUnmountTrade}</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易前调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易前调用 - 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易前调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onBeforeUnmountTrade</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>单画面交易：e.detail = <code>{tradeId:string; exitType: ExitType}</code></li><li>BPMN 交易：e.detail = <code>{tradeId:string; exitType: ExitType}</code></li><li>AUF 交易：e.detail = <code>{tradeId:string; exitType: ExitType}</code></li></ol></div><h3 id="onunmountedtrade" tabindex="-1"><a class="header-anchor" href="#onunmountedtrade"><span>_onUnmountedTrade</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> tradeExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易出参&#39;</span><span class="token punctuation">,</span> tradeExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用 - 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> tradeExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易出参&#39;</span><span class="token punctuation">,</span> tradeExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token keyword">let</span> tradeExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易出参&#39;</span><span class="token punctuation">,</span> tradeExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onUnmountedTrade</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul>',21)),(0,e.Lk)("div",d,[s[25]||(s[25]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("ol",null,[s[22]||(s[22]=(0,e.Lk)("li",null,[(0,e.eW)("单画面交易：e.detail = "),(0,e.Lk)("code",null,"{tradeId:string, getExportVar: ()=>any}")],-1)),s[23]||(s[23]=(0,e.Lk)("li",null,[(0,e.eW)("BPMN 交易：e.detail = "),(0,e.Lk)("code",null,"{tradeId:string, getExportVar: ()=>any}")],-1)),s[24]||(s[24]=(0,e.Lk)("li",null,[(0,e.eW)("AUF 交易：e.detail = "),(0,e.Lk)("code",null,"{tradeId:string, getExportVar: ()=>any}")],-1)),(0,e.Lk)("li",null,[s[20]||(s[20]=(0,e.Lk)("code",null,"e.detail.getExportVar()",-1)),s[21]||(s[21]=(0,e.eW)("用于获取交易出参，同")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#%E4%BA%A4%E6%98%93%E5%87%BA%E5%8F%82"},{default:(0,e.k6)((()=>s[19]||(s[19]=[(0,e.eW)("交易出参")]))),_:1})])])]),(0,e.Lk)("div",r,[s[32]||(s[32]=(0,e.Lk)("p",{class:"hint-container-title"},"Warning",-1)),(0,e.Lk)("p",null,[s[27]||(s[27]=(0,e.eW)("关闭后钩子函数虽然可以在交易内的页面注册，但是执行时交易已经被销毁，所以此刻的")),s[28]||(s[28]=(0,e.Lk)("code",null,"this",-1)),s[29]||(s[29]=(0,e.eW)("已经不再指向画面实例，而是")),s[30]||(s[30]=(0,e.Lk)("code",null,"window",-1)),s[31]||(s[31]=(0,e.eW)(",如果想传递参数，请使用")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#setTradeExportVar"},{default:(0,e.k6)((()=>s[26]||(s[26]=[(0,e.eW)("setTradeExportVar")]))),_:1})])]),s[100]||(s[100]=(0,e.Fv)('<h3 id="onactived" tabindex="-1"><a class="header-anchor" href="#onactived"><span>_onActived</span></a></h3><div class="hint-container tip"><p class="hint-container-title">Tips</p><p><code>AUF</code>类型交易特有，仅在画面内生效</p></div><ul><li><strong>类型</strong></li><li><strong>示例</strong></li><li><strong>详细信息</strong></li></ul><h3 id="ondeactived" tabindex="-1"><a class="header-anchor" href="#ondeactived"><span>_onDeactived</span></a></h3><div class="hint-container tip"><p class="hint-container-title">Tips</p><p><code>AUF</code>类型交易特有，仅在画面内生效</p></div><ul><li><strong>类型</strong></li><li><strong>示例</strong></li><li><strong>详细信息</strong></li></ul><h3 id="onerrorcaptured-错误处理钩子函数" tabindex="-1"><a class="header-anchor" href="#onerrorcaptured-错误处理钩子函数"><span>_onErrorCaptured {#错误处理钩子函数}</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">Error</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">  details<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span></span>\n<span class="line">  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">function</span> <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span></span>\n<span class="line">  err<span class="token operator">:</span> Error<span class="token punctuation">,</span></span>\n<span class="line">  vm<span class="token operator">:</span> VueInstance<span class="token punctuation">,</span></span>\n<span class="line">  info<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span></span>\n<span class="line">  e<span class="token operator">:</span> ILifecycleArgs</span>\n<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;错误捕捉 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;错误捕捉 - 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;错误捕捉 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token comment">// this.$aui.alert.show() // 弹框提示错误</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onErrorCaptured</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li><li>错误捕捉指<code>流程类错误</code>，其他语法等错误不会被此函数捕捉到</li><li>弹框可以通过<code>this.$aui</code>获取到</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>单画面交易：e.detail = <code>{tradeId:string}</code></li><li>BPMN 交易：e.detail = <code>{tradeId:string, args:SocketArgs}</code></li><li>AUF 交易：e.detail = <code>{tradeId:string}</code></li><li>面板：e.detail = <code>{tradeId:string}</code></li></ol></div><h3 id="onbeforeunmountpanel" tabindex="-1"><a class="header-anchor" href="#onbeforeunmountpanel"><span>_onBeforeUnmountPanel</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// filePath:BankModule/面板/panel.vue</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板前调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板前调用 - 面板级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板前调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onBeforeUnmountPanel</code>被分别注册在画面级、面板级、全局级，则会按照执行链<code>画面级 -&gt; 面板级 -&gt; 全局级</code>调用</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>e.detail = <code>{panelId:string}</code></p></div><h3 id="onunmountedpanel" tabindex="-1"><a class="header-anchor" href="#onunmountedpanel"><span>_onUnmountedPanel</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// filePath:BankModule/面板/panel.vue</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板后调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> panelExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;面板出参&#39;</span><span class="token punctuation">,</span> panelExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板后调用 - 面板级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> panelExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;面板出参&#39;</span><span class="token punctuation">,</span> panelExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token keyword">let</span> panelExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;面板出参&#39;</span><span class="token punctuation">,</span> panelExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onUnmountedPanel</code>被分别注册在画面级、面板级、全局级，则会按照执行链<code>画面级 -&gt; 面板级 -&gt; 全局级</code>调用</li></ol></li></ul>',32)),(0,e.Lk)("div",k,[s[37]||(s[37]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("ol",null,[s[36]||(s[36]=(0,e.Lk)("li",null,[(0,e.eW)("e.detail = "),(0,e.Lk)("code",null,"{panelId:string, getExportVar: ()=>any}")],-1)),(0,e.Lk)("li",null,[s[34]||(s[34]=(0,e.Lk)("code",null,"e.detail.getExportVar()",-1)),s[35]||(s[35]=(0,e.eW)("用于获取面板出参，同")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#%E9%9D%A2%E6%9D%BF%E5%87%BA%E5%8F%82"},{default:(0,e.k6)((()=>s[33]||(s[33]=[(0,e.eW)("面板出参")]))),_:1})])])]),(0,e.Lk)("div",v,[s[44]||(s[44]=(0,e.Lk)("p",{class:"hint-container-title"},"Warning",-1)),(0,e.Lk)("p",null,[s[39]||(s[39]=(0,e.eW)("关闭后钩子函数虽然可以在面板内的页面注册，但是执行时面板已经被销毁，所以此刻的")),s[40]||(s[40]=(0,e.Lk)("code",null,"this",-1)),s[41]||(s[41]=(0,e.eW)("已经不再指向画面实例，而是")),s[42]||(s[42]=(0,e.Lk)("code",null,"window",-1)),s[43]||(s[43]=(0,e.eW)(",如果想传递参数，请使用")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#setPanelExportVar"},{default:(0,e.k6)((()=>s[38]||(s[38]=[(0,e.eW)("setPanelExportVar")]))),_:1})])]),s[101]||(s[101]=(0,e.Fv)('<h3 id="onshow-onshow" tabindex="-1"><a class="header-anchor" href="#onshow-onshow"><span>_onShow {#onShow}</span></a></h3><p><code>交易/面板</code>是否隐藏</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li><code>作用域为交易/面板</code>，<code>交易/面板</code>相互切换时会触发显示隐藏，<code>交易/面板</code>内的页面之间上一步下一步相互切换不会触发</li><li>面板内的使用方式同交易一致</li></ol></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p><code>创建以及销毁</code> <code>交易/面板</code>时会触发一次<code>显示/隐藏</code></p></div><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onShow</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onShow</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易显示 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onShow</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易显示 - 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onShow</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易显示 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onShow</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>e.detail = <code>{tradeId:string}</code></li></ol></div><h3 id="onhide-onhide" tabindex="-1"><a class="header-anchor" href="#onhide-onhide"><span>_onHide {#onHide}</span></a></h3><p><code>交易/面板</code>是否隐藏</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li><code>作用域为交易/面板</code>，<code>交易/面板</code>相互切换时会触发显示隐藏，<code>交易/面板</code>内的页面之间上一步下一步相互切换不会触发</li><li>面板内的使用方式同交易一致</li></ol></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p><code>创建以及销毁</code> <code>交易/面板</code>时会触发一次<code>显示/隐藏</code></p></div><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onHide</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onHide</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易隐藏 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onHide</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易隐藏 - 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onHide</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易隐藏 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onShow</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>e.detail = <code>{tradeId:string}</code></li></ol></div><h2 id="面板-面板" tabindex="-1"><a class="header-anchor" href="#面板-面板"><span>面板 {#面板}</span></a></h2><blockquote><p>面板：属于交易的一部分，无法独立存在</p></blockquote><blockquote><p>和交易使用同一份数据</p></blockquote><table><thead><tr><th style="text-align:center;">number</th><th style="text-align:left;">hookName</th><th style="text-align:left;">description</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:left;">_onBeforeMountPanel</td><td style="text-align:left;">创建面板前调用</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:left;">_onMountedPanel</td><td style="text-align:left;">创建面板后调用</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:left;">_onBeforeUnmountPanel</td><td style="text-align:left;">销毁面板前调用</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:left;">_onUnmountedPanel</td><td style="text-align:left;">销毁面板后调用</td></tr><tr><td style="text-align:center;">5</td><td style="text-align:left;">_onErrorCaptured</td><td style="text-align:left;">错误处理函数</td></tr><tr><td style="text-align:center;">6</td><td style="text-align:left;">_onMessage</td><td style="text-align:left;">消息接收函数</td></tr><tr><td style="text-align:center;">7</td><td style="text-align:left;">_setDefaultClosing</td><td style="text-align:left;">设置关闭提示</td></tr><tr><td style="text-align:center;">8</td><td style="text-align:left;">_onShow</td><td style="text-align:left;">面板是否显示</td></tr><tr><td style="text-align:center;">9</td><td style="text-align:left;">_onHide</td><td style="text-align:left;">面板是否隐藏</td></tr><tr><td style="text-align:center;">10</td><td style="text-align:left;">_setDefaultLoading</td><td style="text-align:left;">设置加载面板默认页</td></tr><tr><td style="text-align:center;">11</td><td style="text-align:left;">_setSyncLoading</td><td style="text-align:left;">设置交易内打开同步交易的遮照</td></tr></tbody></table><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@agree/ab-manager-trade2&quot;</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">_onBeforeMountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建面板前 - 面板级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onMountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建面板后 - 面板级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;销毁面板前 - 面板级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;销毁面板后 - 面板级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;错误处理函数 - 面板级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;消息接收函数 - 面板级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onbeforemountpanel" tabindex="-1"><a class="header-anchor" href="#onbeforemountpanel"><span>_onBeforeMountPanel</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeMountPanel</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeMountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建面板前- 面板级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeMountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建面板前 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onBeforeMountPanel</code>被分别注册在交易级、全局级，则会按照执行链<code>交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>面板：e.detail = <code>{panelId:string}</code></li></ol></div><h3 id="onmountedpanel" tabindex="-1"><a class="header-anchor" href="#onmountedpanel"><span>_onMountedPanel</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onMountedPanel</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onMountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建面板后- 面板级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onMountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建面板后 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onMountedPanel</code>被分别注册在交易级、全局级，则会按照执行链<code>交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>面板：e.detail = <code>{panelId:string}</code></li></ol></div><h3 id="onbeforeunmountpanel-1" tabindex="-1"><a class="header-anchor" href="#onbeforeunmountpanel-1"><span>_onBeforeUnmountPanel</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// panel.vue</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板前调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板前调用- 面板级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeUnmountPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板前调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onBeforeUnmountPanel</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>面板：e.detail = <code>{panelId:string}</code></li></ol></div><h3 id="onunmountedpanel-1" tabindex="-1"><a class="header-anchor" href="#onunmountedpanel-1"><span>_onUnmountedPanel</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// panel.vue</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板后调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> panelExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;面板出参&#39;</span><span class="token punctuation">,</span> panelExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createPanelSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createPanelSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板后调用- 面板级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> panelExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;面板出参&#39;</span><span class="token punctuation">,</span> panelExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onUnmountedPanel</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁面板后调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token keyword">let</span> panelExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;面板出参&#39;</span><span class="token punctuation">,</span> panelExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onUnmountedPanel</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li></ol></li></ul>',63)),(0,e.Lk)("div",g,[s[49]||(s[49]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("ol",null,[s[48]||(s[48]=(0,e.Lk)("li",null,[(0,e.eW)("面板：e.detail = "),(0,e.Lk)("code",null,"{panelId:string, getExportVar: ()=>any}")],-1)),(0,e.Lk)("li",null,[s[46]||(s[46]=(0,e.Lk)("code",null,"e.detail.getExportVar()",-1)),s[47]||(s[47]=(0,e.eW)("用于获取面板出参，同")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#%E9%9D%A2%E6%9D%BF%E5%87%BA%E5%8F%82"},{default:(0,e.k6)((()=>s[45]||(s[45]=[(0,e.eW)("面板出参")]))),_:1})])])]),(0,e.Lk)("div",m,[s[56]||(s[56]=(0,e.Lk)("p",{class:"hint-container-title"},"Warning",-1)),(0,e.Lk)("p",null,[s[51]||(s[51]=(0,e.eW)("关闭后钩子函数虽然可以在面板内的页面注册，但是执行时面板已经被销毁，所以此刻的")),s[52]||(s[52]=(0,e.Lk)("code",null,"this",-1)),s[53]||(s[53]=(0,e.eW)("已经不再指向画面实例，而是")),s[54]||(s[54]=(0,e.Lk)("code",null,"window",-1)),s[55]||(s[55]=(0,e.eW)(",如果想传递参数，请使用")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#setPanelExportVar"},{default:(0,e.k6)((()=>s[50]||(s[50]=[(0,e.eW)("setPanelExportVar")]))),_:1})])]),s[102]||(s[102]=(0,e.Lk)("h3",{id:"onerrorcaptured",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onerrorcaptured"},[(0,e.Lk)("span",null,"_onErrorCaptured")])],-1)),s[103]||(s[103]=(0,e.Lk)("p",null,"错误捕捉函数",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[58]||(s[58]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"},{default:(0,e.k6)((()=>s[57]||(s[57]=[(0,e.eW)("_onErrorCaptured")]))),_:1})])]),s[104]||(s[104]=(0,e.Lk)("h3",{id:"onmessage",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onmessage"},[(0,e.Lk)("span",null,"_onMessage")])],-1)),s[105]||(s[105]=(0,e.Lk)("p",null,"消息处理函数",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[60]||(s[60]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"},{default:(0,e.k6)((()=>s[59]||(s[59]=[(0,e.eW)("_onMessage")]))),_:1})])]),s[106]||(s[106]=(0,e.Lk)("h3",{id:"setdefaultclosing",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#setdefaultclosing"},[(0,e.Lk)("span",null,"_setDefaultClosing")])],-1)),s[107]||(s[107]=(0,e.Lk)("p",null,"设置关闭提示",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[62]||(s[62]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E8%AE%BE%E7%BD%AE%E5%85%B3%E9%97%AD%E6%8F%90%E7%A4%BA"},{default:(0,e.k6)((()=>s[61]||(s[61]=[(0,e.eW)("_setDefaultClosing")]))),_:1})])]),s[108]||(s[108]=(0,e.Lk)("h3",{id:"onshow",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onshow"},[(0,e.Lk)("span",null,"_onShow")])],-1)),s[109]||(s[109]=(0,e.Lk)("p",null,[(0,e.Lk)("code",null,"交易/面板"),(0,e.eW)("是否显示")],-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[64]||(s[64]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#onShow"},{default:(0,e.k6)((()=>s[63]||(s[63]=[(0,e.eW)("_onShow")]))),_:1})])]),s[110]||(s[110]=(0,e.Lk)("h3",{id:"onhide",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onhide"},[(0,e.Lk)("span",null,"_onHide")])],-1)),s[111]||(s[111]=(0,e.Lk)("p",null,[(0,e.Lk)("code",null,"交易/面板"),(0,e.eW)("是否隐藏")],-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[66]||(s[66]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#onHide"},{default:(0,e.k6)((()=>s[65]||(s[65]=[(0,e.eW)("_onHide")]))),_:1})])]),s[112]||(s[112]=(0,e.Lk)("h3",{id:"setdefaultloading",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#setdefaultloading"},[(0,e.Lk)("span",null,"_setDefaultLoading")])],-1)),s[113]||(s[113]=(0,e.Lk)("p",null,"设置加载画面默认页",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[68]||(s[68]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#setDefaultLoading"},{default:(0,e.k6)((()=>s[67]||(s[67]=[(0,e.eW)("_setDefaultLoading")]))),_:1})])]),s[114]||(s[114]=(0,e.Lk)("h3",{id:"setsyncloading",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#setsyncloading"},[(0,e.Lk)("span",null,"_setSyncLoading")])],-1)),s[115]||(s[115]=(0,e.Lk)("p",null,"设置交易内打开同步交易的遮照",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[70]||(s[70]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#setSyncLoading"},{default:(0,e.k6)((()=>s[69]||(s[69]=[(0,e.eW)("_setSyncLoading")]))),_:1})])]),s[116]||(s[116]=(0,e.Fv)('<h2 id="交易-交易" tabindex="-1"><a class="header-anchor" href="#交易-交易"><span>交易 {#交易}</span></a></h2><blockquote><p>在调用创建交易时定义</p></blockquote><table><thead><tr><th style="text-align:center;">number</th><th style="text-align:left;">hookName</th><th style="text-align:left;">description</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:left;">_onBeforeMountTrade</td><td style="text-align:left;">创建交易前调用</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:left;">_onMountedTrade</td><td style="text-align:left;">创建交易后调用</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:left;">_onBeforeUnmountTrade</td><td style="text-align:left;">销毁交易前调用</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:left;">_onUnmountedTrade</td><td style="text-align:left;">销毁交易后调用</td></tr><tr><td style="text-align:center;">5</td><td style="text-align:left;">_onErrorCaptured</td><td style="text-align:left;">错误处理函数</td></tr><tr><td style="text-align:center;">6</td><td style="text-align:left;">_onMessage</td><td style="text-align:left;">消息接收函数</td></tr><tr><td style="text-align:center;">7</td><td style="text-align:left;">_onShow</td><td style="text-align:left;">交易被显示，例如页签的切换</td></tr><tr><td style="text-align:center;">8</td><td style="text-align:left;">_onHide</td><td style="text-align:left;">交易被隐藏，例如页签的切换</td></tr><tr><td style="text-align:center;">9</td><td style="text-align:left;">_setDefaultClosing</td><td style="text-align:left;">设置关闭提示</td></tr><tr><td style="text-align:center;">10</td><td style="text-align:left;">_setDefaultLoading</td><td style="text-align:left;">设置加载画面默认页</td></tr><tr><td style="text-align:center;">11</td><td style="text-align:left;">_setSyncLoading</td><td style="text-align:left;">设置交易内打开同步交易的遮照</td></tr></tbody></table><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@agree/ab-manager-trade2&quot;</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建交易前 - 交易级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onMountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建交易后 - 交易级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;销毁交易前 - 交易级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;销毁交易后 - 交易级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;错误处理函数 - 交易级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token function">_onMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;消息接收函数 - 交易级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="onbeforemounttrade" tabindex="-1"><a class="header-anchor" href="#onbeforemounttrade"><span>_onBeforeMountTrade</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建交易前调用- 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建交易前调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onBeforeMountTrade</code>被分别注册在交易级、全局级，则会按照执行链<code>交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>面板：e.detail = <code>{tradeId:string}</code></li></ol></div><h3 id="onmountedtrade" tabindex="-1"><a class="header-anchor" href="#onmountedtrade"><span>_onMountedTrade</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onMountedTrade</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onMountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建交易后调用- 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onMountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建交易后调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onMountedTrade</code>被分别注册在交易级、全局级，则会按照执行链<code>交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>面板：e.detail = <code>{tradeId:string}</code></li></ol></div><h3 id="onbeforeunmounttrade" tabindex="-1"><a class="header-anchor" href="#onbeforeunmounttrade"><span>_onBeforeUnmountTrade</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易前调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易前调用- 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易前调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onBeforeUnmountTrade</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>面板：e.detail = <code>{tradeId:string; exitType: ExitType}</code></li></ol></div><h3 id="onunmountedtrade-1" tabindex="-1"><a class="header-anchor" href="#onunmountedtrade-1"><span>_onUnmountedTrade</span></a></h3><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用 - 画面级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> tradeExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易出参&#39;</span><span class="token punctuation">,</span> tradeExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用- 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> tradeExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易出参&#39;</span><span class="token punctuation">,</span> tradeExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">  <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;销毁交易后调用 - 全局级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token keyword">let</span> tradeExportVar <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function">getExportVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;交易出参&#39;</span><span class="token punctuation">,</span> tradeExportVar<span class="token punctuation">)</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>上述示例中，<code>_onUnmountedTrade</code>被分别注册在画面级、交易级、全局级，则会按照执行链<code>画面级 -&gt; 交易级 -&gt; 全局级</code>调用</li><li>入参<code>e.detail</code>的结构根据不同类型的交易，结构有所不同</li></ol></li></ul>',38)),(0,e.Lk)("div",h,[s[78]||(s[78]=(0,e.Lk)("p",{class:"hint-container-title"},"Tips",-1)),(0,e.Lk)("ol",null,[s[74]||(s[74]=(0,e.Lk)("li",null,[(0,e.eW)("单画面交易：e.detail = "),(0,e.Lk)("code",null,"{tradeId:string, getExportVar: ()=>any}")],-1)),s[75]||(s[75]=(0,e.Lk)("li",null,[(0,e.eW)("BPMN 交易：e.detail = "),(0,e.Lk)("code",null,"{tradeId:string, getExportVar: ()=>any}")],-1)),s[76]||(s[76]=(0,e.Lk)("li",null,[(0,e.eW)("AUF 交易：e.detail = "),(0,e.Lk)("code",null,"{tradeId:string, getExportVar: ()=>any}")],-1)),s[77]||(s[77]=(0,e.Lk)("li",null,[(0,e.eW)("面板：e.detail = "),(0,e.Lk)("code",null,"{panelId:string, getExportVar: ()=>any}")],-1)),(0,e.Lk)("li",null,[s[72]||(s[72]=(0,e.Lk)("code",null,"e.detail.getExportVar()",-1)),s[73]||(s[73]=(0,e.eW)("用于获取交易出参，同")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#%E4%BA%A4%E6%98%93%E5%87%BA%E5%8F%82"},{default:(0,e.k6)((()=>s[71]||(s[71]=[(0,e.eW)("交易出参")]))),_:1})])])]),(0,e.Lk)("div",b,[s[85]||(s[85]=(0,e.Lk)("p",{class:"hint-container-title"},"Warning",-1)),(0,e.Lk)("p",null,[s[80]||(s[80]=(0,e.eW)("关闭后钩子函数虽然可以在交易内的页面注册，但是执行时交易已经被销毁，所以此刻的")),s[81]||(s[81]=(0,e.Lk)("code",null,"this",-1)),s[82]||(s[82]=(0,e.eW)("已经不再指向画面实例，而是")),s[83]||(s[83]=(0,e.Lk)("code",null,"window",-1)),s[84]||(s[84]=(0,e.eW)(",如果想传递参数，请使用")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E4%BA%A4%E6%98%93%E7%AE%A1%E7%90%86%E5%99%A8.html#setTradeExportVar"},{default:(0,e.k6)((()=>s[79]||(s[79]=[(0,e.eW)("setTradeExportVar")]))),_:1})])]),s[117]||(s[117]=(0,e.Lk)("h3",{id:"onerrorcaptured-1",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onerrorcaptured-1"},[(0,e.Lk)("span",null,"_onErrorCaptured")])],-1)),s[118]||(s[118]=(0,e.Lk)("p",null,"错误捕捉函数",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[87]||(s[87]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"},{default:(0,e.k6)((()=>s[86]||(s[86]=[(0,e.eW)("_onErrorCaptured")]))),_:1})])]),s[119]||(s[119]=(0,e.Lk)("h3",{id:"onmessage-1",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onmessage-1"},[(0,e.Lk)("span",null,"_onMessage")])],-1)),s[120]||(s[120]=(0,e.Lk)("p",null,"消息处理函数",-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[89]||(s[89]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"},{default:(0,e.k6)((()=>s[88]||(s[88]=[(0,e.eW)("_onMessage")]))),_:1})])]),s[121]||(s[121]=(0,e.Fv)('<h3 id="setdefaultclosing-设置关闭提示" tabindex="-1"><a class="header-anchor" href="#setdefaultclosing-设置关闭提示"><span>_setDefaultClosing {#设置关闭提示}</span></a></h3><p>设置关闭提示</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>此方法可以自定义关闭提示、选择开启或关闭提示</p></div><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">enum</span> DialogResult <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token constant">CANCEL</span><span class="token punctuation">,</span> <span class="token comment">// 取消</span></span>\n<span class="line">  <span class="token constant">CONFIRM</span><span class="token punctuation">,</span> <span class="token comment">// 确认</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">type</span> <span class="token class-name">IClosingResult</span> <span class="token operator">=</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> DialogResult</span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">function</span> <span class="token function">_setDefaultClosing</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ILifecycleArgs<span class="token punctuation">)</span><span class="token operator">:</span> IClosingResult</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token function">_onMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;画面内缺失context&#39;</span><span class="token punctuation">)</span></span>\n<span class="line"></span>\n<span class="line highlighted">       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDefaultClosing</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>\n<span class="line highlighted">         <span class="token comment">// return false // 取消默认关闭提示</span></span>\n<span class="line highlighted">         <span class="token comment">// return true // 开启默认关闭提示</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">         <span class="token comment">// 自定义关闭提示</span></span>\n<span class="line highlighted">         <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exitType <span class="token operator">===</span> <span class="token string">&#39;finish&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          <span class="token comment">// 交易完成提示信息</span></span>\n<span class="line highlighted">         <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exitType <span class="token operator">===</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          <span class="token comment">// 交易挂起提示信息</span></span>\n<span class="line highlighted">         <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          <span class="token comment">// 交易中途退出提示信息</span></span>\n<span class="line highlighted">         <span class="token punctuation">}</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">         <span class="token comment">// return e.DialogResult.CANCEL // 取消关闭动作</span></span>\n<span class="line highlighted">         <span class="token keyword">return</span> e<span class="token punctuation">.</span>DialogResult<span class="token punctuation">.</span><span class="token constant">CONFIRM</span> <span class="token comment">// 关闭</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_setDefaultClosing</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token comment">// return false // 取消默认关闭提示</span></span>\n<span class="line highlighted">      <span class="token comment">// return true // 开启默认关闭提示</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// 自定义关闭提示</span></span>\n<span class="line highlighted">      <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exitType <span class="token operator">===</span> <span class="token string">&#39;finish&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token comment">// 交易完成提示信息</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exitType <span class="token operator">===</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token comment">// 交易挂起提示信息</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token comment">// 交易中途退出提示信息</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// return e.DialogResult.CANCEL // 取消关闭动作</span></span>\n<span class="line highlighted">      <span class="token keyword">return</span> e<span class="token punctuation">.</span>DialogResult<span class="token punctuation">.</span><span class="token constant">CONFIRM</span> <span class="token comment">// 关闭</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">   <span class="token function">_setDefaultClosing</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token comment">// return false // 取消默认关闭提示</span></span>\n<span class="line highlighted">      <span class="token comment">// return true // 开启默认关闭提示</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// 自定义关闭提示</span></span>\n<span class="line highlighted">      <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exitType <span class="token operator">===</span> <span class="token string">&#39;finish&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token comment">// 交易完成提示信息</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>exitType <span class="token operator">===</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token comment">// 交易挂起提示信息</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token comment">// 交易中途退出提示信息</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// return e.DialogResult.CANCEL // 取消关闭动作</span></span>\n<span class="line highlighted">      <span class="token keyword">return</span> e<span class="token punctuation">.</span>DialogResult<span class="token punctuation">.</span><span class="token constant">CONFIRM</span> <span class="token comment">// 关闭</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>默认禁用关闭提示</li><li>返回值有两种：<code>boolean</code>则代表开启或禁用关闭提示；<code>DialogResult</code>代表自定义关闭提示后，需要明确用户的操作结果</li><li>如果在<code>画面级 -&gt; 交易级 -&gt; 全局级</code>均设置，仅优先执行最后注册的，即执行优先级最高的，其余均忽略</li><li>可根据<code>e.detail.exitType</code>获取交易退出类型，做不同提示信息处理</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">优先级</p><p>从高到低： <code>画面级 -&gt; 交易级 -&gt; 全局级</code></p><p>执行优先级最高的，其余均忽略</p></div><h3 id="onshow-1" tabindex="-1"><a class="header-anchor" href="#onshow-1"><span>_onShow</span></a></h3><p><code>交易/面板</code>是否显示</p>',13)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[91]||(s[91]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#onShow"},{default:(0,e.k6)((()=>s[90]||(s[90]=[(0,e.eW)("_onShow")]))),_:1})])]),s[122]||(s[122]=(0,e.Lk)("h3",{id:"onhide-1",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#onhide-1"},[(0,e.Lk)("span",null,"_onHide")])],-1)),s[123]||(s[123]=(0,e.Lk)("p",null,[(0,e.Lk)("code",null,"交易/面板"),(0,e.eW)("是否隐藏")],-1)),(0,e.Lk)("blockquote",null,[(0,e.Lk)("p",null,[s[93]||(s[93]=(0,e.eW)("参考")),(0,e.bF)(a,{to:"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html#onHide"},{default:(0,e.k6)((()=>s[92]||(s[92]=[(0,e.eW)("_onHide")]))),_:1})])]),s[124]||(s[124]=(0,e.Fv)('<h3 id="setdefaultloading-setdefaultloading" tabindex="-1"><a class="header-anchor" href="#setdefaultloading-setdefaultloading"><span>_setDefaultLoading {#setDefaultLoading}</span></a></h3><blockquote><p>设置加载画面默认页</p></blockquote><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>支持<code>bpmn</code>、<code>单画面</code>、<code>面板</code></p><p><code>auf</code>通过<code>AufPanel</code>设置</p></div><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">DefaultLoadingPagePath</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">function</span> <span class="token function">_setDefaultLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> DefaultLoadingPagePath<span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_setDefaultLoading</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token keyword">return</span> <span class="token string">&quot;BankModule/pages/common/DefaultLoadingPage&quot;</span></span>\n<span class="line highlighted">      <span class="token comment">// return false // 表示去掉默认页</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">   <span class="token function">_setDefaultLoading</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token keyword">return</span> <span class="token string">&quot;BankModule/pages/common/DefaultLoadingPage&quot;</span></span>\n<span class="line highlighted">      <span class="token comment">// return false // 表示去掉默认页</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>详细信息</strong></li></ul><ol><li>此函数归属于<code>交易/面板</code>级别，<code>无法在画面内设置</code></li><li>平台默认带有默认页</li><li>如果在<code>交易级 -&gt; 全局级</code>均设置，仅优先执行最后注册的，即执行优先级最高的，其余均忽略</li><li>如果返回值为<code>false</code>代表去掉平台默认的加载页</li></ol><div class="hint-container tip"><p class="hint-container-title">优先级</p><p>从高到低： <code>交易级 -&gt; 全局级</code></p><p>执行优先级最高的，其余均忽略</p></div><ul><li><strong>平台默认效果图</strong><img src="'+t+'" alt="平台默认页效果图" title="平台默认页效果图"></li></ul><h3 id="setsyncloading-setsyncloading" tabindex="-1"><a class="header-anchor" href="#setsyncloading-setsyncloading"><span>_setSyncLoading {#setSyncLoading}</span></a></h3><blockquote><p>设置交易内打开同步交易的遮照</p></blockquote><div class="hint-container warning"><p class="hint-container-title">适用场景</p><ol><li>支持<code>bpmn</code>、<code>auf</code>、<code>单画面</code>、<code>面板</code></li><li>此遮照仅在打开的容器类型为<code>tab</code>时生效，如果是<code>dialog</code>类型则不会有作用</li><li>交易内打开同步交易<code>tab</code>、交易内打开同步面板<code>tab</code>、面板内同步打开交易<code>tab</code>、面板内同步打开面板<code>tab</code></li></ol></div><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">TargetId</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 遮照需要挂载的domId</span></span>\n<span class="line"><span class="token keyword">type</span> <span class="token class-name">SubTabOfId</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 同步打开的tab所属的id</span></span>\n<span class="line"><span class="token keyword">function</span> <span class="token function">GetSubTabOfId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> SubTabOfId<span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">interface</span> <span class="token class-name">SyncLoading</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">;</span> <span class="token comment">// 隐藏遮照</span></span>\n<span class="line">  <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">;</span> <span class="token comment">// 显示遮照</span></span>\n<span class="line">  <span class="token function-variable function">close</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">;</span> <span class="token comment">// 销毁遮照</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"><span class="token keyword">type</span> <span class="token class-name">SyncLoadingResult</span> <span class="token operator">=</span> SyncLoading <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">function</span> <span class="token function">_setSyncLoading</span><span class="token punctuation">(</span></span>\n<span class="line">  targetId<span class="token operator">:</span> TargetId<span class="token punctuation">,</span></span>\n<span class="line">  getSubTabOfId<span class="token operator">:</span> GetSubTabOfId<span class="token punctuation">,</span></span>\n<span class="line">  e<span class="token operator">:</span> ILifecycleArgs</span>\n<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> SyncLoadingResult<span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_setSyncLoading</span><span class="token punctuation">(</span>targetId<span class="token punctuation">,</span> getSubTabOfId<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">       <span class="token keyword">let</span> syncLoading <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$aui<span class="token punctuation">.</span>loading<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line highlighted">        component<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createElement</span><span class="token punctuation">(</span></span>\n<span class="line highlighted">          <span class="token string">&quot;aui-button&quot;</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">          <span class="token punctuation">{</span></span>\n<span class="line highlighted">            on<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">              <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;跳转&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">switchTrade</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tradeId<span class="token operator">:</span> <span class="token function">getSubTradeId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">              <span class="token punctuation">}</span></span>\n<span class="line highlighted">            <span class="token punctuation">}</span></span>\n<span class="line highlighted">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">          <span class="token string">&quot;跳转&quot;</span></span>\n<span class="line highlighted">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        target<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>targetId<span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        background<span class="token operator">:</span> <span class="token string">&#39;rgba(0, 0, 0, 0.7)&#39;</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// 表示采用自定义的遮照</span></span>\n<span class="line highlighted">      <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          syncLoading<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line highlighted">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        close<span class="token operator">:</span> syncLoading<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>syncLoading<span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          syncLoading<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line highlighted">        <span class="token punctuation">}</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// return false // 表示去掉平台默认的遮照</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">   <span class="token function">_setDefaultLoading</span><span class="token punctuation">(</span>targetId<span class="token punctuation">,</span> getSubTabOfId<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">     <span class="token keyword">let</span> syncLoading <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$aui<span class="token punctuation">.</span>loading<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line highlighted">        component<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createElement</span><span class="token punctuation">(</span></span>\n<span class="line highlighted">          <span class="token string">&quot;aui-button&quot;</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">          <span class="token punctuation">{</span></span>\n<span class="line highlighted">            on<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">              <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;跳转&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">switchTrade</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tradeId<span class="token operator">:</span> <span class="token function">getSubTradeId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">              <span class="token punctuation">}</span></span>\n<span class="line highlighted">            <span class="token punctuation">}</span></span>\n<span class="line highlighted">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">          <span class="token string">&quot;跳转&quot;</span></span>\n<span class="line highlighted">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        target<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>targetId<span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        background<span class="token operator">:</span> <span class="token string">&#39;rgba(0, 0, 0, 0.7)&#39;</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// 表示采用自定义的遮照</span></span>\n<span class="line highlighted">      <span class="token keyword">return</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">        <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          syncLoading<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span></span>\n<span class="line highlighted">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        close<span class="token operator">:</span> syncLoading<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>syncLoading<span class="token punctuation">)</span><span class="token punctuation">,</span></span>\n<span class="line highlighted">        <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">          syncLoading<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span></span>\n<span class="line highlighted">        <span class="token punctuation">}</span></span>\n<span class="line highlighted">      <span class="token punctuation">}</span></span>\n<span class="line highlighted"></span>\n<span class="line highlighted">      <span class="token comment">// return false // 表示去掉平台默认的遮照</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>详细信息</strong></li></ul><ol><li>此函数归属于<code>交易/面板</code>级别，<code>无法在画面内设置</code></li><li>平台默认带有默认遮照</li><li>如果在<code>交易级 -&gt; 全局级</code>均设置，仅优先执行最后注册的，即执行优先级最高的，其余均忽略</li><li>如果返回值为<code>false</code>代表去掉平台默认的遮照</li><li>如果返回值为<code>true|undefined</code>代表使用平台默认的遮照</li><li>如果返回值为<code>SyncLoading</code>代表自定义，自定义请符合规范</li></ol><div class="hint-container tip"><p class="hint-container-title">优先级</p><p>从高到低： <code>交易级 -&gt; 全局级</code></p><p>执行优先级最高的，其余均忽略</p></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><ol><li>如果返回值为<code>SyncLoading</code>代表自定义，自定义请符合规范</li><li><code>show/hide</code>仅作用在视觉上，<code>close</code>在销毁交易时调用代表真实销毁</li></ol><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">SyncLoading</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">;</span> <span class="token comment">// 隐藏遮照</span></span>\n<span class="line">  <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">;</span> <span class="token comment">// 显示遮照</span></span>\n<span class="line">  <span class="token function-variable function">close</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">;</span> <span class="token comment">// 销毁遮照</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><ul><li><strong>平台默认效果图</strong><img src="'+p+'" alt="平台默认遮照效果图" title="平台默认遮照效果图"></li></ul><h2 id="画面级-画面级" tabindex="-1"><a class="header-anchor" href="#画面级-画面级"><span>画面级 {#画面级}</span></a></h2><blockquote><p>一般指组成交易或者面板的<code>.vue</code></p></blockquote><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">   <span class="token keyword">async</span>  <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>示例中的文件<code>BankModule/个人开卡/开卡 的一个画面：卡种选择</code>就是<code>画面</code></p></div><h2 id="退出类型-退出类型" tabindex="-1"><a class="header-anchor" href="#退出类型-退出类型"><span>退出类型 {#退出类型}</span></a></h2><blockquote><p>退出交易的方式：中止/完成</p></blockquote><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">ExitType</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">  Abort <span class="token operator">=</span> <span class="token string">&#39;abort&#39;</span> <span class="token comment">// 中止退出</span></span>\n<span class="line">  Finish <span class="token operator">=</span> <span class="token string">&#39;finish&#39;</span> <span class="token comment">// 完成退出</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="交易级-交易级" tabindex="-1"><a class="header-anchor" href="#交易级-交易级"><span>交易级 {#交易级}</span></a></h2><blockquote><p>一般在创建交易时使用钩子函数</p></blockquote><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTradeSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@agree/ab-manager-trade2&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">await</span> <span class="token function">createTradeSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line highlighted">  hooks<span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">    <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line highlighted">      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建交易前 - 交易级&#39;</span><span class="token punctuation">)</span></span>\n<span class="line highlighted">    <span class="token punctuation">}</span></span>\n<span class="line highlighted">    <span class="token comment">// ...</span></span>\n<span class="line highlighted">  <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token comment">// ...</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>上述示例中，在创建交易时传入的钩子函数，就是<code>交易级</code></p></div><h2 id="全局级-全局级" tabindex="-1"><a class="header-anchor" href="#全局级-全局级"><span>全局级 {#全局级}</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>全局级的钩子函数请定义在<code>moduleName/pages/index.[js|ts]</code>内</p></div><blockquote><p>具体使用参考<a href="./%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E8%A7%84%E8%8C%83">全局函数定义规范</a></p></blockquote><ul><li><strong>示例</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// filePath = &#39;BankModule/pages/index.ts&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token function">_onBeforeMountTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建交易前 - 全局级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">_onMountedTrade</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建交易后 - 全局级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">_onBeforeUnmountTrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;销毁交易前 - 全局级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">_onUnmountedTrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;销毁交易后 - 全局级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">_onErrorCaptured</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;错误处理函数 - 全局级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token function">_onMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;消息接收函数 - 全局级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="钩子函数入参" tabindex="-1"><a class="header-anchor" href="#钩子函数入参"><span>钩子函数入参</span></a></h2><blockquote><p>部分钩子函数会有参数，用于创建交易或者面板时使用，其他场景下参数为空</p></blockquote><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">ILifecycleArgs</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span>stop<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token function-variable function">captured</span><span class="token operator">:</span> <span class="token punctuation">(</span>captured<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>\n<span class="line">  detail<span class="token operator">:</span> IArguments<span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="detail" tabindex="-1"><a class="header-anchor" href="#detail"><span>detail</span></a></h3><p>数据主体</p><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">type</span> <span class="token class-name">detail</span> <span class="token operator">=</span> IArguments<span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Tips</p><p><code>IArguments</code>具体结构请参考对应的钩子函数的<code>详细信息</code></p></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件被挂载之前调用 - 画面级&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">let</span> detail <span class="token operator">=</span> e<span class="token punctuation">.</span>detail</span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>数据主体</li></ol></li></ul><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>不同级别的钩子函数的参数不一致，请具体查看</p></div><h3 id="captured" tabindex="-1"><a class="header-anchor" href="#captured"><span>captured</span></a></h3><p>改变钩子函数的执行阶段</p><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function-variable function">captured</span><span class="token operator">:</span> <span class="token punctuation">(</span>captured<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">   <span class="token keyword">async</span>  <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件被挂载之前调用 - 画面级&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span></span>\n<span class="line highlighted">      <span class="token keyword">await</span> e<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>钩子函数执行阶段分为：阶段一冒泡，阶段二捕获，改变执行阶段即指将阶段一的函数放到阶段二执行</li><li>需要<code>await</code></li></ol></li></ul><h3 id="stop" tabindex="-1"><a class="header-anchor" href="#stop"><span>stop</span></a></h3><pre><code>阻止后钩子函数执行\n</code></pre><ul><li><strong>类型</strong></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span>stop<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>示例</strong></li></ul><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>\n<span class="line"><span class="token comment">// TradeType: BPMN、BankModule/个人开卡/开卡 的一个画面：卡种选择</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">   <span class="token keyword">async</span>  <span class="token function">_onBeforeMount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;在组件被挂载之前调用 - 画面级&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span></span>\n<span class="line highlighted">      e<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>详细信息</strong></p><ol><li>阻止后续钩子函数执行</li><li><code>captured</code>阶段的也会取消执行</li></ol></li></ul><h2 id="钩子函数出参-钩子函数出参" tabindex="-1"><a class="header-anchor" href="#钩子函数出参-钩子函数出参"><span>钩子函数出参 {#钩子函数出参}</span></a></h2><blockquote><p>钩子函数无出参</p></blockquote><h2 id="执行阶段" tabindex="-1"><a class="header-anchor" href="#执行阶段"><span>执行阶段</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Tips</p><blockquote><p>钩子函数的调用为一条链式调用，注册在链上的同一钩子函数会按照某种执行顺序调用</p></blockquote></div><blockquote><p>通过<code>stop</code>以及<code>captured</code>可以改变原有的执行顺序以及执行阶段</p></blockquote><blockquote><p>钩子函数的执行阶段分为:<code>阶段一（冒泡）</code>,<code>阶段二（捕获）</code></p></blockquote><blockquote><p>如若不添加干扰，则同一钩子函数的调用链按照默认的执行顺序在阶段一执行</p></blockquote><p><img src="'+l+'" alt="vitepress init screenshot" style="border-radius:8px;"></p><h2 id="执行顺序-执行顺序" tabindex="-1"><a class="header-anchor" href="#执行顺序-执行顺序"><span>执行顺序 {#执行顺序}</span></a></h2><blockquote><p>执行顺序分为三种：顺序，逆序，中止</p></blockquote><div class="hint-container tip"><p class="hint-container-title">Tips</p><ol><li>通过<code>stop</code>可以中断执行链</li><li>通过<code>captured</code>可以改变执行阶段从而实现改变执行顺序</li></ol></div><blockquote><p>生命周期函数分为两种：一种是固定执行顺序无法更改，一种是执行顺序可以更改</p></blockquote><h3 id="无法修改执行顺序的钩子函数" tabindex="-1"><a class="header-anchor" href="#无法修改执行顺序的钩子函数"><span>无法修改执行顺序的钩子函数</span></a></h3><blockquote><p>均为画面内的钩子函数</p></blockquote><table><thead><tr><th style="text-align:center;">number</th><th style="text-align:left;">hookName</th><th style="text-align:left;">description</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:left;">_onBeforeMount</td><td style="text-align:left;">在组件被挂载之前调用，异步</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:left;">_onMounted</td><td style="text-align:left;">组件挂载完成后执行，异步</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:left;">_onBeforeUnmount</td><td style="text-align:left;">在组件实例被卸载之前调用，异步</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:left;">_onUnmounted</td><td style="text-align:left;">组件实例被卸载之后调用，异步</td></tr></tbody></table><h3 id="可以更改执行顺序的钩子函数" tabindex="-1"><a class="header-anchor" href="#可以更改执行顺序的钩子函数"><span>可以更改执行顺序的钩子函数</span></a></h3><blockquote><ol><li>画面: _onErrorCaptured、_onMessage、_onBeforeUnmountTrade</li><li>面板: _onBeforeMountPanel、_onMountedPanel、_onBeforeUnmountPanel、_onUnmountedPanel、_onErrorCaptured、_onMessage</li><li>交易: _onBeforeMountTrade、_onMountedTrade、_onBeforeUnmountTrade、_onUnmountedTrade、_onErrorCaptured、_onMessage</li></ol></blockquote><h3 id="创建顺序" tabindex="-1"><a class="header-anchor" href="#创建顺序"><span>创建顺序</span></a></h3><blockquote><p>创建交易前 -&gt; 创建画面前 -&gt; 创建画面后 -&gt; 创建交易后</p></blockquote><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>创建交易前/创建交易后：交易级、全局级</p><p>执行顺序有可能从内到外或者从外到内，可能被阻止也可能不被阻止</p></div><h3 id="销毁顺序" tabindex="-1"><a class="header-anchor" href="#销毁顺序"><span>销毁顺序</span></a></h3><blockquote><p>销毁交易易前 -&gt; 销毁页面前-&gt; 销毁页面后 -&gt; 销毁交易后</p></blockquote><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>销毁交易前/销毁交易后：画面级、交易级、全局级</p><p>执行顺序有可能从内到外或者从外到内，可能被阻止也可能不被阻止</p></div><h3 id="执行链过程中出现异常" tabindex="-1"><a class="header-anchor" href="#执行链过程中出现异常"><span>执行链过程中出现异常</span></a></h3><blockquote><p>执行过程中暴露的钩子函数如果报错，则将错误记录下来，<code>不可中断执行链</code></p></blockquote><h2 id="服务端下发的交易消息结构-服务端下发的交易消息结构" tabindex="-1"><a class="header-anchor" href="#服务端下发的交易消息结构-服务端下发的交易消息结构"><span>服务端下发的交易消息结构 {#服务端下发的交易消息结构}</span></a></h2><blockquote><p><code>BPMN</code>交易每个页面的信息由服务端通过<code>socket</code>方式下发</p></blockquote><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token property">&quot;isPageInsideMsg&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否是页面内的消息</span></span>\n<span class="line">  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token property">&quot;router&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token comment">// 当前步骤信息</span></span>\n<span class="line">      <span class="token property">&quot;commitTerminal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 提交端</span></span>\n<span class="line">      <span class="token property">&quot;processTerminal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 处理端</span></span>\n<span class="line">      <span class="token property">&quot;resetFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否允许重置</span></span>\n<span class="line">      <span class="token property">&quot;skipFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否略过</span></span>\n<span class="line">      <span class="token property">&quot;stepKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取身份证信息&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前步骤id</span></span>\n<span class="line">      <span class="token property">&quot;stepName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取身份证信息&quot;</span> <span class="token comment">// 当前步骤名</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token property">&quot;meta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token property">&quot;branchNum&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0000&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 机构号</span></span>\n<span class="line">      <span class="token property">&quot;checkOidFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否检测oid</span></span>\n<span class="line">      <span class="token property">&quot;currentDefinitionKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BankModule:scene/云柜交易/个人业务/测试交易&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前交易名</span></span>\n<span class="line">      <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 当前交易是否结束</span></span>\n<span class="line">      <span class="token property">&quot;jumpFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否允许回跳</span></span>\n<span class="line">      <span class="token property">&quot;moduleName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BankModule&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 所属工程名</span></span>\n<span class="line">      <span class="token comment">// 下一步骤信息</span></span>\n<span class="line">      <span class="token property">&quot;nextStep&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token property">&quot;commitTerminal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token property">&quot;processTerminal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token property">&quot;resetFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token property">&quot;skipFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token property">&quot;stepKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取身份证信息&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">        <span class="token property">&quot;stepName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取身份证信息&quot;</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token property">&quot;retryStepFlag&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否重试</span></span>\n<span class="line">      <span class="token property">&quot;sessionID&quot;</span><span class="token operator">:</span> <span class="token string">&quot;21effa7b-259e-4431-b883-6f162ad0c3a2&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前交易sessionid</span></span>\n<span class="line">      <span class="token property">&quot;stepKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;获取身份证信息&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前步骤id</span></span>\n<span class="line">      <span class="token property">&quot;taskId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前步骤taskid</span></span>\n<span class="line">      <span class="token property">&quot;taskKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BankModule:scene/云柜交易/个人业务/测试交易/测试节点1&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前二级流程节点id</span></span>\n<span class="line">      <span class="token property">&quot;tradeMember&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token property">&quot;&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span></span>\n<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 当前交易成员</span></span>\n<span class="line">      <span class="token property">&quot;tradeName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scene/云柜交易/个人业务/测试交易&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前交易名</span></span>\n<span class="line">      <span class="token property">&quot;tradeTitle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;云柜交易/个人业务/测试交易&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 标题</span></span>\n<span class="line">      <span class="token property">&quot;userNum&quot;</span><span class="token operator">:</span> <span class="token string">&quot;000000&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 柜员号</span></span>\n<span class="line">      <span class="token property">&quot;variableJson&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">// 流程数据</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 交易adm</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token property">&quot;scope&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 分发类型</span></span>\n<span class="line">  <span class="token comment">// 未来步骤数据</span></span>\n<span class="line">  <span class="token property">&quot;pathInfoList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>\n<span class="line">    <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token property">&quot;pathTaskKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试节点1&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token property">&quot;pathTaskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试节点1&quot;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token property">&quot;pathTaskKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试节点2&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token property">&quot;pathTaskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试节点2&quot;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token property">&quot;aaseMessageId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;57eed2f7-5340-4841-b478-8d69bc003842&quot;</span><span class="token punctuation">,</span> <span class="token comment">// messageId</span></span>\n<span class="line">  <span class="token property">&quot;reqUniqueId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;parcel-2&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 当前请求的唯一id</span></span>\n<span class="line">  <span class="token property">&quot;cellUnit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ABX5&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 消息类型，区分abx和ab5</span></span>\n<span class="line">  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 注册id</span></span>\n<span class="line">  <span class="token comment">// 推送消息是否成功信息</span></span>\n<span class="line">  <span class="token property">&quot;sessionErrorInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token property">&quot;errorHandleWay&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>\n<span class="line">      <span class="token property">&quot;退出&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/exitProcess&quot;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0000&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span></span>\n<span class="line">    <span class="token property">&quot;isSuccess&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wspush&quot;</span> <span class="token comment">// 推送消息类型</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',97))])}]]),E=JSON.parse('{"path":"/ABX5/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E5%B9%B3%E5%8F%B0/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html","title":"生命周期 {#生命周期}","lang":"en-US","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"规范原则 {#规范原则}","slug":"规范原则-规范原则","link":"#规范原则-规范原则","children":[]},{"level":2,"title":"规范定义范围 {#规范定义范围}","slug":"规范定义范围-规范定义范围","link":"#规范定义范围-规范定义范围","children":[]},{"level":2,"title":"使用 {#使用}","slug":"使用-使用","link":"#使用-使用","children":[]},{"level":2,"title":"画面 {#画面}","slug":"画面-画面","link":"#画面-画面","children":[{"level":3,"title":"_onBeforeMount","slug":"onbeforemount","link":"#onbeforemount","children":[]},{"level":3,"title":"_onMounted","slug":"onmounted","link":"#onmounted","children":[]},{"level":3,"title":"_onBeforeUnmount","slug":"onbeforeunmount","link":"#onbeforeunmount","children":[]},{"level":3,"title":"_onUnmounted","slug":"onunmounted","link":"#onunmounted","children":[]},{"level":3,"title":"_onMessage {#消息处理钩子函数}","slug":"onmessage-消息处理钩子函数","link":"#onmessage-消息处理钩子函数","children":[]},{"level":3,"title":"_onBeforeUnmountTrade {#onBeforeUnmountTrade}","slug":"onbeforeunmounttrade-onbeforeunmounttrade","link":"#onbeforeunmounttrade-onbeforeunmounttrade","children":[]},{"level":3,"title":"_onUnmountedTrade","slug":"onunmountedtrade","link":"#onunmountedtrade","children":[]},{"level":3,"title":"_onActived","slug":"onactived","link":"#onactived","children":[]},{"level":3,"title":"_onDeactived","slug":"ondeactived","link":"#ondeactived","children":[]},{"level":3,"title":"_onErrorCaptured {#错误处理钩子函数}","slug":"onerrorcaptured-错误处理钩子函数","link":"#onerrorcaptured-错误处理钩子函数","children":[]},{"level":3,"title":"_onBeforeUnmountPanel","slug":"onbeforeunmountpanel","link":"#onbeforeunmountpanel","children":[]},{"level":3,"title":"_onUnmountedPanel","slug":"onunmountedpanel","link":"#onunmountedpanel","children":[]},{"level":3,"title":"_onShow {#onShow}","slug":"onshow-onshow","link":"#onshow-onshow","children":[]},{"level":3,"title":"_onHide {#onHide}","slug":"onhide-onhide","link":"#onhide-onhide","children":[]}]},{"level":2,"title":"面板 {#面板}","slug":"面板-面板","link":"#面板-面板","children":[{"level":3,"title":"_onBeforeMountPanel","slug":"onbeforemountpanel","link":"#onbeforemountpanel","children":[]},{"level":3,"title":"_onMountedPanel","slug":"onmountedpanel","link":"#onmountedpanel","children":[]},{"level":3,"title":"_onBeforeUnmountPanel","slug":"onbeforeunmountpanel-1","link":"#onbeforeunmountpanel-1","children":[]},{"level":3,"title":"_onUnmountedPanel","slug":"onunmountedpanel-1","link":"#onunmountedpanel-1","children":[]},{"level":3,"title":"_onErrorCaptured","slug":"onerrorcaptured","link":"#onerrorcaptured","children":[]},{"level":3,"title":"_onMessage","slug":"onmessage","link":"#onmessage","children":[]},{"level":3,"title":"_setDefaultClosing","slug":"setdefaultclosing","link":"#setdefaultclosing","children":[]},{"level":3,"title":"_onShow","slug":"onshow","link":"#onshow","children":[]},{"level":3,"title":"_onHide","slug":"onhide","link":"#onhide","children":[]},{"level":3,"title":"_setDefaultLoading","slug":"setdefaultloading","link":"#setdefaultloading","children":[]},{"level":3,"title":"_setSyncLoading","slug":"setsyncloading","link":"#setsyncloading","children":[]}]},{"level":2,"title":"交易 {#交易}","slug":"交易-交易","link":"#交易-交易","children":[{"level":3,"title":"_onBeforeMountTrade","slug":"onbeforemounttrade","link":"#onbeforemounttrade","children":[]},{"level":3,"title":"_onMountedTrade","slug":"onmountedtrade","link":"#onmountedtrade","children":[]},{"level":3,"title":"_onBeforeUnmountTrade","slug":"onbeforeunmounttrade","link":"#onbeforeunmounttrade","children":[]},{"level":3,"title":"_onUnmountedTrade","slug":"onunmountedtrade-1","link":"#onunmountedtrade-1","children":[]},{"level":3,"title":"_onErrorCaptured","slug":"onerrorcaptured-1","link":"#onerrorcaptured-1","children":[]},{"level":3,"title":"_onMessage","slug":"onmessage-1","link":"#onmessage-1","children":[]},{"level":3,"title":"_setDefaultClosing {#设置关闭提示}","slug":"setdefaultclosing-设置关闭提示","link":"#setdefaultclosing-设置关闭提示","children":[]},{"level":3,"title":"_onShow","slug":"onshow-1","link":"#onshow-1","children":[]},{"level":3,"title":"_onHide","slug":"onhide-1","link":"#onhide-1","children":[]},{"level":3,"title":"_setDefaultLoading {#setDefaultLoading}","slug":"setdefaultloading-setdefaultloading","link":"#setdefaultloading-setdefaultloading","children":[]},{"level":3,"title":"_setSyncLoading {#setSyncLoading}","slug":"setsyncloading-setsyncloading","link":"#setsyncloading-setsyncloading","children":[]}]},{"level":2,"title":"画面级 {#画面级}","slug":"画面级-画面级","link":"#画面级-画面级","children":[]},{"level":2,"title":"退出类型 {#退出类型}","slug":"退出类型-退出类型","link":"#退出类型-退出类型","children":[]},{"level":2,"title":"交易级 {#交易级}","slug":"交易级-交易级","link":"#交易级-交易级","children":[]},{"level":2,"title":"全局级 {#全局级}","slug":"全局级-全局级","link":"#全局级-全局级","children":[]},{"level":2,"title":"钩子函数入参","slug":"钩子函数入参","link":"#钩子函数入参","children":[{"level":3,"title":"detail","slug":"detail","link":"#detail","children":[]},{"level":3,"title":"captured","slug":"captured","link":"#captured","children":[]},{"level":3,"title":"stop","slug":"stop","link":"#stop","children":[]}]},{"level":2,"title":"钩子函数出参 {#钩子函数出参}","slug":"钩子函数出参-钩子函数出参","link":"#钩子函数出参-钩子函数出参","children":[]},{"level":2,"title":"执行阶段","slug":"执行阶段","link":"#执行阶段","children":[]},{"level":2,"title":"执行顺序 {#执行顺序}","slug":"执行顺序-执行顺序","link":"#执行顺序-执行顺序","children":[{"level":3,"title":"无法修改执行顺序的钩子函数","slug":"无法修改执行顺序的钩子函数","link":"#无法修改执行顺序的钩子函数","children":[]},{"level":3,"title":"可以更改执行顺序的钩子函数","slug":"可以更改执行顺序的钩子函数","link":"#可以更改执行顺序的钩子函数","children":[]},{"level":3,"title":"创建顺序","slug":"创建顺序","link":"#创建顺序","children":[]},{"level":3,"title":"销毁顺序","slug":"销毁顺序","link":"#销毁顺序","children":[]},{"level":3,"title":"执行链过程中出现异常","slug":"执行链过程中出现异常","link":"#执行链过程中出现异常","children":[]}]},{"level":2,"title":"服务端下发的交易消息结构 {#服务端下发的交易消息结构}","slug":"服务端下发的交易消息结构-服务端下发的交易消息结构","link":"#服务端下发的交易消息结构-服务端下发的交易消息结构","children":[]}],"git":{"updatedTime":1727145923000,"contributors":[{"name":"wangaoqi","email":"wangaoqi@agree.com.cn","commits":1}]},"filePathRelative":"ABX5/前端/深入平台/生命周期.md"}')}}]);