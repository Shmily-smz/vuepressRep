"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[3289],{35510:(e,a,s)=>{s.r(a),s.d(a,{comp:()=>v,data:()=>b});var p=s(20641);const n=s.p+"assets/img/1.a844f6f1.png",l=s.p+"assets/img/2.babcc418.png",r=s.p+"assets/img/3.d69d1e40.png",i=s.p+"assets/img/4.2f287cdf.png",t=s.p+"assets/img/5.43ba1e9c.png",c=s.p+"assets/img/6.6918a601.png",d=s.p+"assets/img/7.85b4e73b.png",o=s.p+"assets/img/8.fd043962.png",h=s.p+"assets/img/10.72e294fa.png",A=s.p+"assets/img/11.0a00d00d.png",g=s.p+"assets/img/12.e0ab1f51.png",m=s.p+"assets/img/13.8cf67290.png",E=s.p+"assets/img/14.acf2685c.png",f={},v=(0,s(66262).A)(f,[["render",function(e,a){return(0,p.uX)(),(0,p.CE)("div",null,a[0]||(a[0]=[(0,p.Fv)('<h2 id="陕西信合abc白屏概要分析" tabindex="-1"><a class="header-anchor" href="#陕西信合abc白屏概要分析"><span>陕西信合ABC白屏概要分析</span></a></h2><h3 id="_1、windows事件管理器错误信息分析" tabindex="-1"><a class="header-anchor" href="#_1、windows事件管理器错误信息分析"><span>1、windows事件管理器错误信息分析</span></a></h3><p>生产ABC白屏后，windows事件管理器信息，发现有以下错误</p><img src="'+n+'" alt="image-20230110185720742" style="zoom:67%;"><p>从上面图中，可以看到三个比较关键的信息：<strong>错误应用程序是jcef_helper.exe，错误模块是KERNELBASE.dll，异常代码是0xe0000008</strong>。</p><h3 id="_2、错误应用程序jcef-helper-exe" tabindex="-1"><a class="header-anchor" href="#_2、错误应用程序jcef-helper-exe"><span>2、错误应用程序jcef_helper.exe</span></a></h3><p>jcef_helper.exe已知为ABC5上的H5渲染进程</p><h3 id="_3、错误模块kernelbase-dll" tabindex="-1"><a class="header-anchor" href="#_3、错误模块kernelbase-dll"><span>3、错误模块KERNELBASE.dll</span></a></h3><p>在分析KERNELBASE.dll之前，不禁想起来北京银行的案例，当时出现abc的java进程崩溃，错误模块指向MSCTF.dll，MSCTF.dll是微软的文本服务，控制文本录入相关的内容，并在后续系统更新过程中，微软进行了修复。那么KERNELBASE.dll会不会像MSCTF.dll一样，是导致问题的根本原因，更新系统就可以解决呢？</p><p><img src="'+l+'" alt="Image"></p><p><img src="'+r+'" alt="Image"></p><p><strong>带着这样的思考，对错误模块KERNELBASE.dll，查询资料检索：</strong></p><p>https://github.com/electron/electron/issues/36841</p><p><img src="'+i+'" alt="image-20230110204428955"></p><p>https://github.com/cefsharp/CefSharp/issues/2019</p><p>Sharp版的cef也有类似的问题，通过调试日志，查找到是内存溢出导致的问题</p><p><img src="'+t+'" alt="image-20230110152422967"></p><p><img src="'+c+'" alt="image-20230110152447040"></p><p>那么KERNELBASE.dll的本质是什么呢？继续检索资料</p><p>https://zhuanlan.zhihu.com/p/242615448</p><img src="'+d+'" alt="image-20230110204100973" style="zoom:80%;"><img src="'+o+'" alt="image-20230110204113211" style="zoom:67%;"><p>相比于北京银行出现的问题，MSCTF.dll是一个文本服务，控制文本录入相关的内容，KernelBase.dll是提供系统API接口的库。</p><p>概括来说KernelBase.dll是一个NT内核系统的底层API接口的DLL文件，与另外一个kernel32.dll有相同的功能。属于系统内核的表现形式，里面的实现就是系统内部机制，对外提供系统API接口，应用程序调用API接口时，上层程序调用API不catch程序中的异常，那异常就只能走到KernelBase.dll这一层，<strong>可以说KernelBase.dll错误没有反馈出具体异常信息，只体现程序在调用系统API时，出现了程序异常，具体问题原因，需要从程序上分析</strong>。</p><p>通过DEPENDS.EXE对KernelBase.dll进行分析，发现我们常用的系统接口如PostMessage都在里面，与查到的资料说明一致</p><p><img src="data:image/png;base64,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" alt="image-20230111090425287"></p><p><img src="'+h+'" alt="image-20230111090508593"></p><h3 id="_4、异常代码0xe0000008" tabindex="-1"><a class="header-anchor" href="#_4、异常代码0xe0000008"><span>4、异常代码0xe0000008</span></a></h3><p>那么异常代码0xe0000008有代表什么意思呢?继续翻阅资料</p><p>https://answers.microsoft.com/en-us/windows/forum/all/the-exception-unknown-software-exception/34796cd0-d18c-42ab-a8e4-4d41aa77f05f</p><p><img src="'+A+'" alt="image-20230110154611362"></p><p><img src="'+g+'" alt="image-20230110154623284"></p><p>https://magpcss.org/ceforum/viewtopic.php?f=17&amp;t=18019&amp;p=47458&amp;hilit=0xe0000008#p47458</p><p><img src="'+m+'" alt="image-20230110151305654"></p><p>https://superuser.com/questions/1442974/chrome-the-exception-unknown-software-exception-0xe0000008</p><p><img src="'+E+'" alt="image-20230110154909830"></p><p>可以看到，相似的错误基本指向内存不足，程序在申请内存时，系统没有足够的连续内存提供，导致程序错误。</p><p>对于内存有以下理解：</p><p><code>物理内存是随机储存器（RAM），剩余空间是不连续的，即使你看到1G大小的剩余空间，而实际上最大单块空闲内存可能只有5M大小，当程序需要创建最大单块空闲内存的对象时，比如一个较大类的对象或加载一个复杂函数，需要超过5M内存的时候就一定失败。实际上硬盘和总线内存之类之所以都是4K，是因为理论上4k以内的对象不会创建失败，超过4K的对象就可能导致与虚拟内存做页交换。Windows上“虚拟内存”通常是指windows的“页面文件”（pagefile.sys）。配置虚拟内存，可以使操作系统在调度内存时，把大对象或不常用的对象写入页面文件内，防止内存空间不足，报出计算机内存不足错误。</code></p><h3 id="_5、总结" tabindex="-1"><a class="header-anchor" href="#_5、总结"><span>5、总结</span></a></h3><p>根据上述系统日志的指引，指向内存不足相关内容，结合项目上了解到的信息，上午可以正常办理业务，联系操作到下午时，会出现一定概率白屏，猜测很可能是abc5的前端部分某些处理存在内存泄漏，当积累到一定程度之后，在做操作时，内存空间不足，导致abc5的H5渲染进程崩溃，出现白屏现象。</p><p>根据经验来说H5渲染进程崩溃，一般在以下两种场景下可能产生</p><p>1、瞬时在新生代申请大对象，没有足够的内存空间容纳</p><p>2、长时间内存泄漏，老年代一直累积，超过可用内存空间</p><p>根据项目组现象，此次问题很可能是后者场景，需要通过继续收集生产信息与重现内容，来确定白屏场景，定位问题并解决</p>',45)]))}]]),b=JSON.parse('{"path":"/AB%E4%BA%A7%E5%93%81%E7%9F%A5%E8%AF%86%E5%BA%93/%E5%BE%85%E8%AF%84%E5%AE%A1%E6%96%87%E6%A1%A3/%E9%99%95%E8%A5%BF%E4%BF%A1%E5%90%88ABC%E7%99%BD%E5%B1%8F%E6%A6%82%E8%A6%81%E5%88%86%E6%9E%90.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"陕西信合ABC白屏概要分析","slug":"陕西信合abc白屏概要分析","link":"#陕西信合abc白屏概要分析","children":[{"level":3,"title":"1、windows事件管理器错误信息分析","slug":"_1、windows事件管理器错误信息分析","link":"#_1、windows事件管理器错误信息分析","children":[]},{"level":3,"title":"2、错误应用程序jcef_helper.exe","slug":"_2、错误应用程序jcef-helper-exe","link":"#_2、错误应用程序jcef-helper-exe","children":[]},{"level":3,"title":"3、错误模块KERNELBASE.dll","slug":"_3、错误模块kernelbase-dll","link":"#_3、错误模块kernelbase-dll","children":[]},{"level":3,"title":"4、异常代码0xe0000008","slug":"_4、异常代码0xe0000008","link":"#_4、异常代码0xe0000008","children":[]},{"level":3,"title":"5、总结","slug":"_5、总结","link":"#_5、总结","children":[]}]}],"git":{"updatedTime":1727145923000,"contributors":[{"name":"wangaoqi","email":"wangaoqi@agree.com.cn","commits":1}]},"filePathRelative":"AB产品知识库/待评审文档/陕西信合ABC白屏概要分析.md"}')}}]);