<template><div><h2 id="_1-软件使用场景" tabindex="-1"><a class="header-anchor" href="#_1-软件使用场景"><span>1.软件使用场景</span></a></h2>
<p>实际场景中可能由于网络延迟、第三方应用或防火墙等将数据包截获，导致客户端和服务端之间通讯的数据包丢失，所以需要这个抓包工具进一步排查网络问题。</p>
<h2 id="_2-安装和使用" tabindex="-1"><a class="header-anchor" href="#_2-安装和使用"><span>2.安装和使用</span></a></h2>
<h3 id="_2-1-安装" tabindex="-1"><a class="header-anchor" href="#_2-1-安装"><span>2.1.安装</span></a></h3>
<p>从官网上下载所需版本。
官网：<a href="https://www.wireshark.org/download.html%E3%80%82" target="_blank" rel="noopener noreferrer">/https://www.wireshark.org/download.html。/</a>
注意：必须安装WinPcap，才能捕获数据包，安装过程都是下一步即可。
![图片描述](/tfl/pictures/20
[html]</p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-align:justify;
text-justify:inter-ideograph"><a name="_GoBack" target="_blank"></a><span style=""><o:p>&nbsp;</o:p></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph"><a name="_Toc14335_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc14335_WPSOffice_Level1"><span style="">1.</span></span><span style="mso-bookmark:_Toc14335_WPSOffice_Level1"><span style="">软件使用场景</span></span><span style="mso-bookmark:_Toc14335_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">实际场景中可能由于网络延迟、第三方应用或防火墙等将数据包截获，导致客户端和服务端之间通讯的数据包丢失，所以需要这个抓包工具进一步排查网络问题。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph"><a name="_Toc23271_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc23271_WPSOffice_Level1"><span style="">2.</span></span><span style="mso-bookmark:_Toc23271_WPSOffice_Level1"><span style="">安装和使用</span></span><span style="mso-bookmark:_Toc23271_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<h2 style="text-align:justify;
text-justify:inter-ideograph"><a name="_Toc23271_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc23271_WPSOffice_Level2"><span style="">2.</span></span><span style="mso-bookmark:_Toc23271_WPSOffice_Level2"><span style="">1.安装</span></span><span style="mso-bookmark:_Toc23271_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">从官网上下载所需版本。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">官网：</span><a href="https://www.wireshark.org/download.html?" target="_blank"><span style="">https://www.wireshark.org/download.html。</span></a><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">注意：</span><span style="">必须安装WinPcap</span><span style="">，才能捕获数据包，安装过程都是下一步即可。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:118.200005pt;
margin-top:132.65pt;
width:47.15pt;
height:18.0pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/1.jpg" width="63.9180908203125" height="25.167343139648438"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:115.00001pt;
margin-top:151.2pt;
width:157.5pt;
height:39.600002pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/2.jpg" width="210.0" height="52.80000686645508"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:8.9pt;
margin-top:93.3pt;
width:128.05pt;
height:46.099995pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/3.jpg" width="170.72999572753906" height="61.470001220703125"  /></span><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/4.jpg" width="498.0" height="373.0"  /></span><span style=""><span><o:p></o:p></span></span><br style="mso-ignore:vglayout" clear="all"  /></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<h2 style="text-align:justify;
text-justify:inter-ideograph"><a name="_Toc21124_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc21124_WPSOffice_Level2"><span style="">2.</span></span><span style="mso-bookmark:_Toc21124_WPSOffice_Level2"><span style="">2.安装可能遇到的问题</span></span><span style="mso-bookmark:_Toc21124_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style="">安装</span><span style="">过程中如果跳出下图错误，说明</span><span style="">NPF驱动时出错，Wireshark必须有NPF驱动才能工作</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:center;
text-align:center;
mso-pagination:widow-orphan"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/5.jpg" width="474.07000732421875" height="258.07000732421875"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">如果NPF驱动安装失败，打开Wireshark的界面后，开始捕获按钮不可用，捕获接口列表是空的；</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/6.jpg" width="553.2000122070312" height="340.6000061035156"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">需要手动安装NPF，一般不会出现NPF服务安装失败的问题。如有需要手动安装NPF服务，注意</span><span style=""> </span><span style="">=</span><span style=""> </span><span style="">和 auto</span><span style=""> </span><span style="">之间存在空格。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/7.jpg" width="473.07000732421875" height="118.0"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">按照如图操作，如果</span><span style="">出现</span><span style="">“指定的服务已标记为删除”，则说明服务创建成功，<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">注意</span><span style=""> </span><span style="">=</span><span style=""> </span><span style="">和 </span><span style="">C</span><span style=""> </span><span style="">之间存在空格</span><span style="">。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/8.jpg" width="553.469970703125" height="116.06999969482422"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">如不能创建服务，下个驱动加载工具，尝试加载NPF.sys；</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/9.jpg" width="436.07000732421875" height="163.0"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">详情参考：</span><a href="https://blog.csdn.net/bcbobo21cn/article/details/51452518" target="_blank"><span class="MsoHyperlinkFollowed" style="">https://blog.csdn.net/bcbobo21cn/article/details/51452518</span></a><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><o:p>&nbsp;</o:p></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph"><a name="_Toc21124_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc21124_WPSOffice_Level1"><span style="">3.</span></span><span style="mso-bookmark:_Toc21124_WPSOffice_Level1"><span style="">使用</span></span><span style="mso-bookmark:_Toc21124_WPSOffice_Level1"><span style="">Wireshark简单抓包</span></span><span style="mso-bookmark:_Toc21124_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style="">安装好抓包工具Wireshark后运行Wireshark.exe(此为中文版)，</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:118.8pt;
margin-top:140.85pt;
width:85.39999pt;
height:27.7pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/10.jpg" width="114.93666076660156" height="38.40110778808594"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:205.95pt;
margin-top:154.7pt;
width:120.60001pt;
height:27.650002pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/11.jpg" width="160.80001831054688" height="36.8699951171875"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:6.9000006pt;
margin-top:36.400005pt;
width:30.0pt;
height:82.5pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/12.jpg" width="41.1673469543457" height="111.05142211914062"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:8.6pt;
margin-top:117.2pt;
width:59.35pt;
height:25.950005pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/13.jpg" width="79.13333129882812" height="34.600006103515625"  /></span><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/14.jpg" width="543.0700073242188" height="241.60000610351562"  /></span><span style=""><span><o:p></o:p></span></span><br style="mso-ignore:vglayout" clear="all"  /></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:126.90001pt;
margin-top:-19.55pt;
width:94.7pt;
height:23.65pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/15.jpg" width="126.26998901367188" height="31.53333282470703"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:67.45pt;
margin-top:-4.55pt;
width:61.150005pt;
height:24.8pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/16.jpg" width="82.56329345703125" height="33.93038558959961"  /></span><span style=""><span><o:p></o:p></span></span><br style="mso-ignore:vglayout" clear="all"  /></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:227.85pt;
margin-top:101.8pt;
width:208.2pt;
height:38.050003pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/17.jpg" width="277.6000061035156" height="50.733341217041016"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:92.84999pt;
margin-top:17.550001pt;
width:204.80003pt;
height:84.8pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/18.jpg" width="274.1041259765625" height="114.03190612792969"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:115.950005pt;
margin-top:104.65pt;
width:58.799995pt;
height:30.0pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/19.jpg" width="78.39999389648438" height="40.0"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:34.6pt;
margin-top:10.649998pt;
width:94.6pt;
height:92.85pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/20.jpg" width="126.93820190429688" height="124.57725524902344"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:-27.1pt;
margin-top:66.0pt;
width:59.45pt;
height:27.7pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/21.jpg" width="79.2699966430664" height="36.93333435058594"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:-3.5000002pt;
margin-top:7.750002pt;
width:27.1pt;
height:60.0pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/22.jpg" width="36.89527893066406" height="81.02216339111328"  /></span><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/23.jpg" width="553.1300048828125" height="186.0"  /></span><span style=""><span><o:p></o:p></span></span><br style="mso-ignore:vglayout" clear="all"  /></p>
<h2 style="text-align:justify;
text-justify:inter-ideograph;
direction:ltr"><a name="_Toc21921_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc21921_WPSOffice_Level2"><span style="">3.1过滤规则：</span></span><span style="mso-bookmark:_Toc21921_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:left;
text-align:left"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">IP过滤<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">ip.addr==192.168.1.1 只要包中的IP有192.168.1.1的，就会提取过来<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">IP源地址:ip.src==192.168.1.1<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">IP目标地址：ip.dst==192.168.2.101<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">端口过滤：<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">tcp.port==80 选取所有的端口是80的包，不管是源端口还是目的端口<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">tcp.dstport==80 找目标端口是80的包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">tcp.srcprot==80 找源端口是80的包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">udp.port==21 找所有的端口是21的UDP包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">udp.srcport==53 找源端口是53的UDP包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">udp.dstport==52 找目标端口是53的UDP包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">协议过滤：<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">http<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">tcp<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">udp<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">icmp<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">arp<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">HTTP模式过滤<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">http.request.method=="POST" 找http协议下的POST包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd;
text-indent:21.0pt"><span style="">http.request.method=="GET" 找http协议下的GET包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left"><span style="">备注：具体过滤规则有详细说明</span><a href="https://blog.csdn.net/wojiaopanpan/article/details/69944970" target="_blank"><span style="">https://blog.csdn.net/wojiaopanpan/article/details/69944970</span></a><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">eg:<span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>ip.dst eq 192.168.191.183 and tcp.port == 50001；（这里的IP为服务器IP，端口也为服务器端口，dst为目的地，相对应的是src为来源。）</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:241.75pt;
margin-top:62.95pt;
width:154.55pt;
height:23.65pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/24.jpg" width="206.06997680664062" height="31.53333282470703"  /></span><!--[if gte vml 1]><![endif]--><span style="mso-ignore:vglayout;
position:absolute;
text-indent:0;
left:0;
margin-left:320.75pt;
margin-top:35.25pt;
width:73.250015pt;
height:27.099998pt"><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/25.jpg" width="98.71124267578125" height="37.19978332519531"  /></span><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/26.jpg" width="550.469970703125" height="87.93000030517578"  /></span><span style=""><span><o:p></o:p></span></span><br style="mso-ignore:vglayout" clear="all"  /></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">（</span><span style="">注</span><span style="">）此处点击箭头后才能按照过滤条件显示。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><o:p>&nbsp;</o:p></span></p>
<h2 style="text-align:justify;
text-justify:inter-ideograph;
direction:ltr"><a name="_Toc22872_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc22872_WPSOffice_Level2"><span style="">3.2 </span></span><span style="mso-bookmark:_Toc22872_WPSOffice_Level2"><span style="">Wireshark窗口介绍：</span></span><span style="mso-bookmark:_Toc22872_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/27.jpg" width="553.6699829101562" height="310.07000732421875"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><o:p>&nbsp;</o:p></span></p>
<h2 style="text-align:justify;
text-justify:inter-ideograph;
direction:ltr"><a name="_Toc1593_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc1593_WPSOffice_Level2"><span style="">3.3 Tcp封包详细信息介绍：</span></span><span style="mso-bookmark:_Toc1593_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">Frame: 物理层的数据帧概况</span><span style="">（注[]里面的不是主体，略过）<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/28.jpg" width="527.8699951171875" height="209.6699981689453"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">封装类型<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">捕获时间<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">时间戳<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">帧序列号<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">帧长度<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">捕获长度<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">Ethernet II: 数据链路层以太网帧头部信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/29.jpg" width="493.4700012207031" height="96.52999877929688"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style="">目标MAC<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style="">源MAC<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style="">IP类型<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">Internet Protocol Version 4: 互联网层IP包头部信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/30.jpg" width="486.5299987792969" height="232.8699951171875"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">IPV4 网络层IP头部信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">版本<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">IP头部长度<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">区分服务字段<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">总长度<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">标志位：用来分组，给分片的数据包标记用的<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">标记位：用来确定后续是否有切片以及决定是否分片<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">TTL：生存时间<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">上层协议：TCP<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">头部校验和<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">源IP<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">目标IP<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">Transmission Control Protocol: 传输层T的数据段头部</span><span style="">信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:12.0pt;
mso-char-indent-count:1.0;
mso-char-indent-size:12.0"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/31.jpg" width="553.7333374023438" height="357.7300109863281"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">TCP 传输层头部信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">源端口<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">目标端口<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">序列号<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">确认号：期望收到对方下一个报文段的第一个数据字节的序号。<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">标记<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">窗口大小<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">校验和<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">HTTP 应用层头部信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">请求方式<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">请求头（host/ua/ct/）<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">请求内容（POST方式才有）<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">状态码<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">响应头（date/server/set-cookie/ct/）<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
text-indent:10.5pt;
mso-char-indent-count:1.0;
mso-char-indent-size:10.5"><span style="">响应内容（HTML+CSS+JS 组成的响应正文）<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left"><span style="">使用详情见：</span><a href="https://blog.csdn.net/weixin_41585557/article/details/79007804" target="_blank"><span style="">https://blog.csdn.net/weixin_41585557/article/details/79007804</span></a><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
margin-left:-10.5pt;
mso-para-margin-left:-1.0gd"><span style=""><o:p>&nbsp;</o:p></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l0 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">4.<span style="font:7.0pt Times New Roman"></span></span><a name="_Toc21921_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc21921_WPSOffice_Level1"><span style="">使用wireshark追踪数据流和信息说明</span></span><span style="mso-bookmark:_Toc21921_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<h2 style="text-align:justify;
text-justify:inter-ideograph;
direction:ltr"><a name="_Toc31222_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc31222_WPSOffice_Level2"><span style="">4.1数据流追踪</span></span><span style="mso-bookmark:_Toc31222_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">我们的一个完整的数据流一般都是由很多个包组成的，<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">查看某条数据包对于的数据流的方法：<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>右键——>追踪流<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>然后就会有TCP流、UDP流、SSL流、HTTP流<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>当你这个数据包是属于哪种流，就可以选择对应的流<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">当我们选择了追踪流时，会弹出该流的完整数据流。还有这个数据流中包含的数据包。<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">顶部的过滤器就是该流的过滤规则<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/32.jpg" width="553.7333374023438" height="307.4700012207031"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">点击对应的数据流后</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">整个流就会在一个单独的窗口中显示出来，我们注意到这个窗口中的文件以两种颜色显示，其中红色用来标明从源地址前往目的地址的流量，而蓝色用来区分出相反方向也就是从目的地址到源地址的流量。这里颜色的标记以哪方先开始通信为准，一般情况下都是由客户端主动发起与服务器的连接，所以大都是将客户端的通信显示为红色。<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/33.jpg" width="549.3300170898438" height="273.6000061035156"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">以ABmaster基板发送报文方式来说，其中报文数据以P、C、Z开头，分别是协议配置、协议内容和协议压缩方式。紧跟相对应的propertiesMap和contentMap值。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/34.jpg" width="552.6699829101562" height="217.8000030517578"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/35.jpg" width="553.0700073242188" height="224.8000030517578"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<h2 style="text-align:justify;
text-justify:inter-ideograph;
direction:ltr"><a name="_Toc2130_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc2130_WPSOffice_Level2"><span style="">4.2专家信息说明</span></span><span style="mso-bookmark:_Toc2130_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">功能：可以对数据包中特定的状态进行警告说明。<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>错误(errors)<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>警告(Warnings)<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>标记(notes)<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><span style="mso-spacerun:yes">&nbsp;&nbsp; </span>对话(chats)<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">菜单栏：分析——>专家信息<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/36.jpg" width="553.7333374023438" height="226.8699951171875"  /></span><span style=""><span><o:p></o:p></span></span></p>
<h2 style="text-align:justify;
text-justify:inter-ideograph;
direction:ltr"><a name="_Toc22128_WPSOffice_Level2" target="_blank"></a><span style="mso-bookmark:_Toc22128_WPSOffice_Level2"><span style="">4.3数据包的统计分析</span></span><span style="mso-bookmark:_Toc22128_WPSOffice_Level2"></span><span style=""><span><o:p></o:p></span></span></h2>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">菜单栏：统计一栏中，可以对抓取的数据包进行进一步的分析，<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">比如抓取的数据包的属性、已解析的地址、协议分级等等<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/37.jpg" width="535.469970703125" height="293.3999938964844"  /></span><span style=""><span><o:p></o:p></span></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l0 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">5.<span style="font:7.0pt Times New Roman"></span></span><a name="_Toc22872_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc22872_WPSOffice_Level1"><span style="">Wireshark查看数据包时间间隔</span></span><span style="mso-bookmark:_Toc22872_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-indent:21.0pt;
mso-char-indent-count:2.0;
mso-char-indent-size:10.5"><span style="">如果数据包量不大，抓包本身也不大，建议从绝对时间判断，打开wireshark软件，并点开相应要分析的抓包文件。进入到最上方菜单<视图>,在弹出菜单选择时间显示格式，再在右侧菜单中选择自捕获经过的秒数。当然也可以选择自上一个捕获经过的秒数，这样时间显示就为相对时间了，比较容易看出有较大间隔的数据包<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/38.jpg" width="551.3300170898438" height="294.0"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-indent:21.0pt;
mso-char-indent-count:2.0;
mso-char-indent-size:10.5"><span style="">如果数据包量比较大，用眼力查看就不太可行了，那就要用工具提供的分析，选择<统计>--IO图表</span><span style="">，</span><span style="">如下图所示，系统会出现一个坐标图，X轴为时间，Y轴指的是发出的数据包情况。通过调整X坐标的刻度，可以很容易地发现发包是否有规律，数据包间隔大不大。<span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/39.jpg" width="552.9299926757812" height="319.2699890136719"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-indent:21.0pt;
mso-char-indent-count:2.0;
mso-char-indent-size:10.5"><span style="">经过测试abs和abc启动一晚上不关闭，共抓取将近60000s的数据（如下两图），数据包可以保存为.pcapng文件，然后完全可以把比较大的数据包保存之后做分析。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/40.jpg" width="553.0700073242188" height="425.92999267578125"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/41.jpg" width="553.0700073242188" height="425.92999267578125"  /></span><span style=""><span><o:p></o:p></span></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l0 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">6.<span style="font:7.0pt Times New Roman"></span></span><a name="_Toc1593_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc1593_WPSOffice_Level1"><span style="">Wireshark判断客户端是否断开</span></span><span style="mso-bookmark:_Toc1593_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-indent:21.0pt"><span style="">Wireshark抓包的过程中，连接如果断开(比如客户端关闭)，wireshark所抓取的包就会断开，拿测试例子来说，abs和abc断开的话，数据包就暂停了。只要客户端不断开，wireshark就不会断(只是理论上，没测试过极限)，可以根据抓取的图表信息反向证明abc是否意外断开。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
text-indent:21.0pt"><span style=""><o:p>&nbsp;</o:p></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l0 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">7.<span style="font:7.0pt Times New Roman"></span></span><a name="_Toc31222_WPSOffice_Level1" target="_blank"></a><span style="mso-bookmark:_Toc31222_WPSOffice_Level1"><span style="">简单实例</span></span><span style="mso-bookmark:_Toc31222_WPSOffice_Level1"></span><span style=""><span><o:p></o:p></span></span></h1>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/42.jpg" width="553.7333374023438" height="187.0"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">双击本地连接。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:left;
text-align:left;
mso-pagination:widow-orphan"><span style=""><img src="@source/AB3/images/工具使用/Wireshark（抓包软件）使用说明/43.jpg" width="553.7333374023438" height="107.0"  /></span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">在Apply a display filter处填写捕获过滤公式</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">eg：ip.dst eq 192.168.191.183 and tcp.port == 50001</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">192.168.191.183为服器端IP，50001为服务器通讯端口。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">然后开始抓包。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style="">问题分析</span><span style="">常用步骤</span><span style="">：客户端与服务端通讯的时候，出问题之后开始抓包。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l1 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">1.<span style="font:7.0pt Times New Roman"></span></span><span style="">查看抓到包的时间和客户端请求的时间差是不是很长，</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l1 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">2.<span style="font:7.0pt Times New Roman"></span></span><span style="" lang="EN-US">如果抓包工具根本没有抓到包，那就是发送请求的数据根本就没发送到服务端，说明被<span style="mso-tab-count:1 Blank">&nbsp;&nbsp; </span>拦截了。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l1 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">3.<span style="font:7.0pt Times New Roman"></span></span><span style="">如果软件抓到包，一般不会出现数据包接收不到的问题，就可能另外分析了。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph;
mso-list:l1 level1 lfo1;
margin-left:0.0pt;
text-indent:0.0pt"><!--[if !supportLists]--><span style="">4.<span style="font:7.0pt Times New Roman"></span></span><span style="">抓到包的数据和发送的数据是否有遗漏。</span><span style=""><span><o:p></o:p></span></span></p>
<p class="MsoNormal" style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></p>
<h1 style="text-align:justify;
text-justify:inter-ideograph"><span style=""><o:p>&nbsp;</o:p></span></h1>
[/html]
2010/tapd_65362886_1602827756_75.png)
### 2.2.安装可能遇到的问题
安装过程中如果跳出下图错误，说明NPF驱动时出错，Wireshark必须有NPF驱动才能工作
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/44.png)
如果NPF驱动安装失败，打开Wireshark的界面后，开始捕获按钮不可用，捕获接口列表是空的；
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/45.png)
需要手动安装NPF，一般不会出现NPF服务安装失败的问题。如有需要手动安装NPF服务，注意 = 和 auto 之间存在空格。
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/46.png) 
按照如图操作，如果出现“指定的服务已标记为删除”，则说明服务创建成功，
注意 = 和 C 之间存在空格。
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/47.png)
如不能创建服务，下个驱动加载工具，尝试加载NPF.sys；
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/48.png)
详情参考：[/https://blog.csdn.net/bcbobo21cn/article/details/51452518/](https://blog.csdn.net/bcbobo21cn/article/details/51452518)
## 3.使用
安装好抓包工具Wireshark后运行Wireshark.exe(此为中文版)，
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/49.png)
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/50.png)
 备注：具体过滤规则有详细说明[/https://blog.csdn.net/wojiaopanpan/article/details/69944970/](https://blog.csdn.net/wojiaopanpan/article/details/69944970)
eg:     ip.dst eq 192.168.191.183 and tcp.port == 50001；（这里的IP为服务器IP，端口也为服务器端口，dst为目的地，相对应的是src为来源。）
![图片描述](/tfl/pictures/202010/tapd_65362886_1602827972_45.png)
 （注）此处点击箭头后才能按照过滤条件显示。
Wireshark窗口介绍：
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/51.png)
使用详情见：[/https://blog.csdn.net/weixin_41585557/article/details/79007804/](https://blog.csdn.net/weixin_41585557/article/details/79007804)
## 4.简单实例
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/52.png) 
双击本地连接。
![图片描述](../images/工具使用/Wireshark（抓包软件）使用说明/53.png)
在Apply a display filter处填写捕获过滤公式
eg：ip.dst eq 192.168.191.183 and tcp.port == 50001
192.168.191.183为服器端IP，50001为服务器通讯端口。
然后开始抓包。
问题分析常用步骤：客户端与服务端通讯的时候，出问题之后开始抓包。
1. 查看抓到包的时间和客户端请求的时间差是不是很长，
2. 如果抓包工具根本没有抓到包，那就是发送请求的数据根本就没发送到服务端，说明被拦截了。
3. 如果软件抓到包，一般不会出现数据包接收不到的问题，就可能另外分析了。
4. 抓到包的数据和发送的数据是否有遗漏。
## 5. 习题
过滤规则填写的时候，dst和src分别指什么？</div></template>


